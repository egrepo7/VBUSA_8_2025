(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[1],{

/***/ "./assets/js/theme/custom/dual-panel-scroll.js":
/*!*****************************************************!*\
  !*** ./assets/js/theme/custom/dual-panel-scroll.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return NaturalDualPanel; });\n/**\n * Natural Dual Panel Behavior\n * - Uses CSS sticky positioning for natural flow\n * - Right panel sticks until its content ends\n * - Page flows naturally: header -> dual-panel -> related products -> footer\n * - No artificial \"unlocking\" or complex scroll management\n */\nvar NaturalDualPanel = /*#__PURE__*/function () {\n  function NaturalDualPanel() {\n    this.container = document.querySelector('.dual-panel-container');\n    this.detailsPanel = document.querySelector('.details-panel');\n    if (!this.container || !this.detailsPanel) {\n      return;\n    }\n    this.isDesktop = window.matchMedia('(min-width: 1025px)').matches;\n    this.init();\n  }\n  var _proto = NaturalDualPanel.prototype;\n  _proto.init = function init() {\n    if (!this.isDesktop) {\n      this.enableMobileLayout();\n      return;\n    }\n\n    // Enable natural scrolling - no artificial scroll blocking\n    document.body.style.overflow = 'auto';\n\n    // Handle window resize\n    window.addEventListener('resize', this.handleResize.bind(this));\n\n    // Ensure proper sticky behavior\n    this.setupStickyBehavior();\n\n    // Setup quantity selector functions\n    this.setupQuantitySelector();\n  };\n  _proto.setupStickyBehavior = function setupStickyBehavior() {\n    // Ensure the sticky positioning works correctly\n    // by making sure the parent has proper height\n    if (this.container) {\n      this.container.style.position = 'relative';\n    }\n  };\n  _proto.setupQuantitySelector = function setupQuantitySelector() {\n    // The theme's native quantity selector uses data-quantity-change\n    // and is handled by the product-details.js listenQuantityChange() method\n    // We just need to ensure it works properly in our split layout\n\n    var quantityContainer = document.querySelector('[data-quantity-change]');\n    if (quantityContainer) {\n      // Ensure the native theme functionality is properly initialized\n      // The theme handles this automatically through product-details.js\n    }\n  };\n  _proto.enableMobileLayout = function enableMobileLayout() {\n    // For mobile - ensure normal document flow\n    document.body.style.overflow = 'auto';\n    if (this.container) {\n      this.container.style.position = 'relative';\n    }\n    if (this.detailsPanel) {\n      this.detailsPanel.style.position = 'relative';\n      this.detailsPanel.style.top = 'auto';\n    }\n  };\n  _proto.handleResize = function handleResize() {\n    var wasDesktop = this.isDesktop;\n    this.isDesktop = window.matchMedia('(min-width: 1025px)').matches;\n    if (wasDesktop !== this.isDesktop) {\n      this.init();\n    }\n  };\n  return NaturalDualPanel;\n}(); // Initialize when DOM is ready\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  new NaturalDualPanel();\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvanMvdGhlbWUvY3VzdG9tL2R1YWwtcGFuZWwtc2Nyb2xsLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3RoZW1lL2N1c3RvbS9kdWFsLXBhbmVsLXNjcm9sbC5qcz81NGFkIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTmF0dXJhbCBEdWFsIFBhbmVsIEJlaGF2aW9yXG4gKiAtIFVzZXMgQ1NTIHN0aWNreSBwb3NpdGlvbmluZyBmb3IgbmF0dXJhbCBmbG93XG4gKiAtIFJpZ2h0IHBhbmVsIHN0aWNrcyB1bnRpbCBpdHMgY29udGVudCBlbmRzXG4gKiAtIFBhZ2UgZmxvd3MgbmF0dXJhbGx5OiBoZWFkZXIgLT4gZHVhbC1wYW5lbCAtPiByZWxhdGVkIHByb2R1Y3RzIC0+IGZvb3RlclxuICogLSBObyBhcnRpZmljaWFsIFwidW5sb2NraW5nXCIgb3IgY29tcGxleCBzY3JvbGwgbWFuYWdlbWVudFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5hdHVyYWxEdWFsUGFuZWwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kdWFsLXBhbmVsLWNvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLmRldGFpbHNQYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZXRhaWxzLXBhbmVsJyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyIHx8ICF0aGlzLmRldGFpbHNQYW5lbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc0Rlc2t0b3AgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogMTAyNXB4KScpLm1hdGNoZXM7XG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0Rlc2t0b3ApIHtcbiAgICAgICAgICAgIHRoaXMuZW5hYmxlTW9iaWxlTGF5b3V0KCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBFbmFibGUgbmF0dXJhbCBzY3JvbGxpbmcgLSBubyBhcnRpZmljaWFsIHNjcm9sbCBibG9ja2luZ1xuICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2F1dG8nO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIHdpbmRvdyByZXNpemVcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuaGFuZGxlUmVzaXplLmJpbmQodGhpcykpO1xuICAgICAgICBcbiAgICAgICAgLy8gRW5zdXJlIHByb3BlciBzdGlja3kgYmVoYXZpb3JcbiAgICAgICAgdGhpcy5zZXR1cFN0aWNreUJlaGF2aW9yKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXR1cCBxdWFudGl0eSBzZWxlY3RvciBmdW5jdGlvbnNcbiAgICAgICAgdGhpcy5zZXR1cFF1YW50aXR5U2VsZWN0b3IoKTtcbiAgICB9XG5cbiAgICBzZXR1cFN0aWNreUJlaGF2aW9yKCkge1xuICAgICAgICAvLyBFbnN1cmUgdGhlIHN0aWNreSBwb3NpdGlvbmluZyB3b3JrcyBjb3JyZWN0bHlcbiAgICAgICAgLy8gYnkgbWFraW5nIHN1cmUgdGhlIHBhcmVudCBoYXMgcHJvcGVyIGhlaWdodFxuICAgICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldHVwUXVhbnRpdHlTZWxlY3RvcigpIHtcbiAgICAgICAgLy8gVGhlIHRoZW1lJ3MgbmF0aXZlIHF1YW50aXR5IHNlbGVjdG9yIHVzZXMgZGF0YS1xdWFudGl0eS1jaGFuZ2VcbiAgICAgICAgLy8gYW5kIGlzIGhhbmRsZWQgYnkgdGhlIHByb2R1Y3QtZGV0YWlscy5qcyBsaXN0ZW5RdWFudGl0eUNoYW5nZSgpIG1ldGhvZFxuICAgICAgICAvLyBXZSBqdXN0IG5lZWQgdG8gZW5zdXJlIGl0IHdvcmtzIHByb3Blcmx5IGluIG91ciBzcGxpdCBsYXlvdXRcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHF1YW50aXR5Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcXVhbnRpdHktY2hhbmdlXScpO1xuICAgICAgICBpZiAocXVhbnRpdHlDb250YWluZXIpIHtcbiAgICAgICAgICAgIC8vIEVuc3VyZSB0aGUgbmF0aXZlIHRoZW1lIGZ1bmN0aW9uYWxpdHkgaXMgcHJvcGVybHkgaW5pdGlhbGl6ZWRcbiAgICAgICAgICAgIC8vIFRoZSB0aGVtZSBoYW5kbGVzIHRoaXMgYXV0b21hdGljYWxseSB0aHJvdWdoIHByb2R1Y3QtZGV0YWlscy5qc1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZW5hYmxlTW9iaWxlTGF5b3V0KCkge1xuICAgICAgICAvLyBGb3IgbW9iaWxlIC0gZW5zdXJlIG5vcm1hbCBkb2N1bWVudCBmbG93XG4gICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnYXV0byc7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMuZGV0YWlsc1BhbmVsKSB7XG4gICAgICAgICAgICB0aGlzLmRldGFpbHNQYW5lbC5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgICAgICB0aGlzLmRldGFpbHNQYW5lbC5zdHlsZS50b3AgPSAnYXV0byc7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoYW5kbGVSZXNpemUoKSB7XG4gICAgICAgIGNvbnN0IHdhc0Rlc2t0b3AgPSB0aGlzLmlzRGVza3RvcDtcbiAgICAgICAgdGhpcy5pc0Rlc2t0b3AgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG1pbi13aWR0aDogMTAyNXB4KScpLm1hdGNoZXM7XG4gICAgICAgIFxuICAgICAgICBpZiAod2FzRGVza3RvcCAhPT0gdGhpcy5pc0Rlc2t0b3ApIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBJbml0aWFsaXplIHdoZW4gRE9NIGlzIHJlYWR5XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICAgIG5ldyBOYXR1cmFsRHVhbFBhbmVsKCk7XG59KTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFTQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBR0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/js/theme/custom/dual-panel-scroll.js\n");

/***/ }),

/***/ "./assets/js/theme/custom/its-product.js":
/*!***********************************************!*\
  !*** ./assets/js/theme/custom/its-product.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ITSProduct; });\n/**\n * IntuitSolutions - Custom JS that fires on the PDP\n */\nvar ITSProduct = function ITSProduct(context) {};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvanMvdGhlbWUvY3VzdG9tL2l0cy1wcm9kdWN0LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3RoZW1lL2N1c3RvbS9pdHMtcHJvZHVjdC5qcz8zNDMyIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW50dWl0U29sdXRpb25zIC0gQ3VzdG9tIEpTIHRoYXQgZmlyZXMgb24gdGhlIFBEUFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElUU1Byb2R1Y3Qge1xuICAgIGNvbnN0cnVjdG9yKGNvbnRleHQpIHtcbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFGQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./assets/js/theme/custom/its-product.js\n");

/***/ }),

/***/ "./assets/js/theme/custom/mobile-sticky-cart-validator.js":
/*!****************************************************************!*\
  !*** ./assets/js/theme/custom/mobile-sticky-cart-validator.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return MobileStickyCartValidator; });\n/**\n * Mobile Sticky Cart Validator\n * \n * Implements scroll-to-error and popup notification functionality\n * similar to VolleyballUSA.com. Only activates on mobile when \n * sticky cart is visible - won't interfere with desktop dual-panel scrolling.\n */\nvar MobileStickyCartValidator = /*#__PURE__*/function () {\n  function MobileStickyCartValidator() {\n    this.init();\n  }\n  var _proto = MobileStickyCartValidator.prototype;\n  _proto.init = function init() {\n    this.setupClickHandler();\n    this.setupGlobalFunctions();\n  };\n  _proto.setupClickHandler = function setupClickHandler() {\n    var _this = this;\n    // Only handle clicks on mobile sticky cart add-to-cart button\n    $(document).on('click', '.sticky-cart-section-mobile #form-action-addToCart-mobile', function (e) {\n      // Only proceed if sticky cart is visible (mobile/tablet view)\n      if ($('.sticky-cart-section-mobile').is(':visible')) {\n        var formId = $(e.target).attr('form') || 'productOptionsForm-inline';\n        var $form = $('#' + formId);\n        if ($form.length) {\n          e.preventDefault();\n\n          // Check for validation errors\n          if (_this.validateForm($form)) {\n            $form.submit();\n          } else {\n            _this.scrollToFirstValidationError($form);\n          }\n        } else {}\n      } else {}\n    });\n  };\n  _proto.validateForm = function validateForm($form) {\n    // Check for required selects that haven't been selected\n    var $requiredSelects = $form.find('select[required]');\n    var $unselectedRequired = $requiredSelects.filter(function () {\n      return $(this).val() === '' || $(this).prop('selectedIndex') === 0;\n    });\n    return $unselectedRequired.length === 0;\n  };\n  _proto.scrollToFirstValidationError = function scrollToFirstValidationError($form) {\n    var _this2 = this;\n    setTimeout(function () {\n      // Look for existing form validation errors first\n      var $errorField = $form.find('.form-field--error').first();\n      if ($errorField.length === 0) {\n        $errorField = $('.form-field--error').first();\n      }\n      if ($errorField.length > 0) {\n        _this2.smoothScrollToElement($errorField, 'Error Field');\n      } else {\n        // Find first unselected required option\n        var $unselectedRequired = $form.find('[data-product-attribute] select').filter(function () {\n          var $select = $(this);\n          var $attribute = $select.closest('[data-product-attribute]');\n          var isRequired = $attribute.find('label').text().toLowerCase().includes('required') || $select.attr('required') !== undefined;\n          var isUnselected = $select.val() === '' || $select.prop('selectedIndex') === 0;\n          if (isRequired && isUnselected) {}\n          return isRequired && isUnselected;\n        }).first().closest('[data-product-attribute]');\n        if ($unselectedRequired.length > 0) {\n          _this2.smoothScrollToElement($unselectedRequired, 'Required Option');\n        } else {\n          _this2.smoothScrollToElement($form, 'Form');\n        }\n      }\n    }, 100);\n  };\n  _proto.smoothScrollToElement = function smoothScrollToElement($element, elementName) {\n    if (elementName === void 0) {\n      elementName = 'Element';\n    }\n    if ($element.length) {\n      var currentScroll = $(window).scrollTop();\n      var elementOffset = $element.offset();\n      var targetScroll = elementOffset.top - 100;\n      $('html, body').animate({\n        scrollTop: targetScroll\n      }, {\n        duration: 600,\n        easing: 'swing',\n        start: function start() {},\n        complete: function () {\n          // Add highlight effect\n          $element.addClass('scroll-highlight');\n          setTimeout(function () {\n            $element.removeClass('scroll-highlight');\n          }, 2000);\n\n          // Show notification popup\n          this.showRequiredOptionsNotification();\n        }.bind(this)\n      });\n    } else {}\n  };\n  _proto.showRequiredOptionsNotification = function showRequiredOptionsNotification() {\n    // Remove any existing notifications\n    $('.required-options-notification').remove();\n\n    // Create notification HTML\n    var $notification = $(\"\\n            <div class=\\\"required-options-notification\\\">\\n                <div class=\\\"notification-content\\\">\\n                    <div class=\\\"notification-icon\\\">\\u26A0\\uFE0F</div>\\n                    <div class=\\\"notification-text\\\">\\n                        <strong>Required Options Missing</strong>\\n                        <p>Please select all required options before adding to cart</p>\\n                        <small class=\\\"notification-hint\\\">Click to dismiss</small>\\n                    </div>\\n                    <button class=\\\"notification-close\\\">&times;</button>\\n                </div>\\n            </div>\\n        \");\n\n    // Add to body and show with fade effect\n    $('body').append($notification);\n    $notification.hide().fadeIn(400);\n\n    // Click to dismiss entire notification\n    $notification.on('click', function (e) {\n      $(this).fadeOut(300, function () {\n        $(this).remove();\n      });\n    });\n\n    // Close button (prevent event bubbling)\n    $notification.find('.notification-close').on('click', function (e) {\n      e.stopPropagation();\n      $(this).closest('.required-options-notification').fadeOut(300, function () {\n        $(this).remove();\n      });\n    });\n\n    // Auto-dismiss after 5 seconds\n    setTimeout(function () {\n      $notification.fadeOut(400, function () {\n        $(this).remove();\n      });\n    }, 5000);\n  };\n  _proto.setupGlobalFunctions = function setupGlobalFunctions() {\n    var _this3 = this;\n    // Global test function for debugging\n    window.showRequiredOptionsNotification = this.showRequiredOptionsNotification.bind(this);\n    window.testNotification = function () {\n      _this3.showRequiredOptionsNotification();\n    };\n  };\n  return MobileStickyCartValidator;\n}(); // Initialize when DOM is ready\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  new MobileStickyCartValidator();\n});\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.min.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvanMvdGhlbWUvY3VzdG9tL21vYmlsZS1zdGlja3ktY2FydC12YWxpZGF0b3IuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvdGhlbWUvY3VzdG9tL21vYmlsZS1zdGlja3ktY2FydC12YWxpZGF0b3IuanM/YmMyMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE1vYmlsZSBTdGlja3kgQ2FydCBWYWxpZGF0b3JcbiAqIFxuICogSW1wbGVtZW50cyBzY3JvbGwtdG8tZXJyb3IgYW5kIHBvcHVwIG5vdGlmaWNhdGlvbiBmdW5jdGlvbmFsaXR5XG4gKiBzaW1pbGFyIHRvIFZvbGxleWJhbGxVU0EuY29tLiBPbmx5IGFjdGl2YXRlcyBvbiBtb2JpbGUgd2hlbiBcbiAqIHN0aWNreSBjYXJ0IGlzIHZpc2libGUgLSB3b24ndCBpbnRlcmZlcmUgd2l0aCBkZXNrdG9wIGR1YWwtcGFuZWwgc2Nyb2xsaW5nLlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE1vYmlsZVN0aWNreUNhcnRWYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLnNldHVwQ2xpY2tIYW5kbGVyKCk7XG4gICAgICAgIHRoaXMuc2V0dXBHbG9iYWxGdW5jdGlvbnMoKTtcbiAgICB9XG5cbiAgICBzZXR1cENsaWNrSGFuZGxlcigpIHtcbiAgICAgICAgLy8gT25seSBoYW5kbGUgY2xpY2tzIG9uIG1vYmlsZSBzdGlja3kgY2FydCBhZGQtdG8tY2FydCBidXR0b25cbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zdGlja3ktY2FydC1zZWN0aW9uLW1vYmlsZSAjZm9ybS1hY3Rpb24tYWRkVG9DYXJ0LW1vYmlsZScsIChlKSA9PiB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE9ubHkgcHJvY2VlZCBpZiBzdGlja3kgY2FydCBpcyB2aXNpYmxlIChtb2JpbGUvdGFibGV0IHZpZXcpXG4gICAgICAgICAgICBpZiAoJCgnLnN0aWNreS1jYXJ0LXNlY3Rpb24tbW9iaWxlJykuaXMoJzp2aXNpYmxlJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtSWQgPSAkKGUudGFyZ2V0KS5hdHRyKCdmb3JtJykgfHwgJ3Byb2R1Y3RPcHRpb25zRm9ybS1pbmxpbmUnO1xuICAgICAgICAgICAgICAgIGNvbnN0ICRmb3JtID0gJCgnIycgKyBmb3JtSWQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICgkZm9ybS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHZhbGlkYXRpb24gZXJyb3JzXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbGlkYXRlRm9ybSgkZm9ybSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRmb3JtLnN1Ym1pdCgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0ZpcnN0VmFsaWRhdGlvbkVycm9yKCRmb3JtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFsaWRhdGVGb3JtKCRmb3JtKSB7XG4gICAgICAgIC8vIENoZWNrIGZvciByZXF1aXJlZCBzZWxlY3RzIHRoYXQgaGF2ZW4ndCBiZWVuIHNlbGVjdGVkXG4gICAgICAgIGNvbnN0ICRyZXF1aXJlZFNlbGVjdHMgPSAkZm9ybS5maW5kKCdzZWxlY3RbcmVxdWlyZWRdJyk7XG4gICAgICAgIGNvbnN0ICR1bnNlbGVjdGVkUmVxdWlyZWQgPSAkcmVxdWlyZWRTZWxlY3RzLmZpbHRlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiAkKHRoaXMpLnZhbCgpID09PSAnJyB8fCAkKHRoaXMpLnByb3AoJ3NlbGVjdGVkSW5kZXgnKSA9PT0gMDtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBcbiAgICAgICAgcmV0dXJuICR1bnNlbGVjdGVkUmVxdWlyZWQubGVuZ3RoID09PSAwO1xuICAgIH1cblxuICAgIHNjcm9sbFRvRmlyc3RWYWxpZGF0aW9uRXJyb3IoJGZvcm0pIHtcbiAgICAgICAgXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBMb29rIGZvciBleGlzdGluZyBmb3JtIHZhbGlkYXRpb24gZXJyb3JzIGZpcnN0XG4gICAgICAgICAgICBsZXQgJGVycm9yRmllbGQgPSAkZm9ybS5maW5kKCcuZm9ybS1maWVsZC0tZXJyb3InKS5maXJzdCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoJGVycm9yRmllbGQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgJGVycm9yRmllbGQgPSAkKCcuZm9ybS1maWVsZC0tZXJyb3InKS5maXJzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoJGVycm9yRmllbGQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc21vb3RoU2Nyb2xsVG9FbGVtZW50KCRlcnJvckZpZWxkLCAnRXJyb3IgRmllbGQnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gRmluZCBmaXJzdCB1bnNlbGVjdGVkIHJlcXVpcmVkIG9wdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0ICR1bnNlbGVjdGVkUmVxdWlyZWQgPSAkZm9ybS5maW5kKCdbZGF0YS1wcm9kdWN0LWF0dHJpYnV0ZV0gc2VsZWN0JykuZmlsdGVyKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCAkc2VsZWN0ID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgJGF0dHJpYnV0ZSA9ICRzZWxlY3QuY2xvc2VzdCgnW2RhdGEtcHJvZHVjdC1hdHRyaWJ1dGVdJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzUmVxdWlyZWQgPSAkYXR0cmlidXRlLmZpbmQoJ2xhYmVsJykudGV4dCgpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3JlcXVpcmVkJykgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGVjdC5hdHRyKCdyZXF1aXJlZCcpICE9PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlzVW5zZWxlY3RlZCA9ICRzZWxlY3QudmFsKCkgPT09ICcnIHx8ICRzZWxlY3QucHJvcCgnc2VsZWN0ZWRJbmRleCcpID09PSAwO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmVxdWlyZWQgJiYgaXNVbnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpc1JlcXVpcmVkICYmIGlzVW5zZWxlY3RlZDtcbiAgICAgICAgICAgICAgICB9KS5maXJzdCgpLmNsb3Nlc3QoJ1tkYXRhLXByb2R1Y3QtYXR0cmlidXRlXScpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmICgkdW5zZWxlY3RlZFJlcXVpcmVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zbW9vdGhTY3JvbGxUb0VsZW1lbnQoJHVuc2VsZWN0ZWRSZXF1aXJlZCwgJ1JlcXVpcmVkIE9wdGlvbicpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc21vb3RoU2Nyb2xsVG9FbGVtZW50KCRmb3JtLCAnRm9ybScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgMTAwKTtcbiAgICB9XG5cbiAgICBzbW9vdGhTY3JvbGxUb0VsZW1lbnQoJGVsZW1lbnQsIGVsZW1lbnROYW1lID0gJ0VsZW1lbnQnKSB7XG4gICAgICAgIGlmICgkZWxlbWVudC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTY3JvbGwgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50T2Zmc2V0ID0gJGVsZW1lbnQub2Zmc2V0KCk7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRTY3JvbGwgPSBlbGVtZW50T2Zmc2V0LnRvcCAtIDEwMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiB0YXJnZXRTY3JvbGxcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbjogNjAwLFxuICAgICAgICAgICAgICAgIGVhc2luZzogJ3N3aW5nJyxcbiAgICAgICAgICAgICAgICBzdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgaGlnaGxpZ2h0IGVmZmVjdFxuICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5hZGRDbGFzcygnc2Nyb2xsLWhpZ2hsaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZWxlbWVudC5yZW1vdmVDbGFzcygnc2Nyb2xsLWhpZ2hsaWdodCcpO1xuICAgICAgICAgICAgICAgICAgICB9LCAyMDAwKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFNob3cgbm90aWZpY2F0aW9uIHBvcHVwXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1JlcXVpcmVkT3B0aW9uc05vdGlmaWNhdGlvbigpO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzaG93UmVxdWlyZWRPcHRpb25zTm90aWZpY2F0aW9uKCkge1xuICAgICAgICBcbiAgICAgICAgLy8gUmVtb3ZlIGFueSBleGlzdGluZyBub3RpZmljYXRpb25zXG4gICAgICAgICQoJy5yZXF1aXJlZC1vcHRpb25zLW5vdGlmaWNhdGlvbicpLnJlbW92ZSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIG5vdGlmaWNhdGlvbiBIVE1MXG4gICAgICAgIGNvbnN0ICRub3RpZmljYXRpb24gPSAkKGBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyZXF1aXJlZC1vcHRpb25zLW5vdGlmaWNhdGlvblwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJub3RpZmljYXRpb24tY29udGVudFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibm90aWZpY2F0aW9uLWljb25cIj7imqDvuI88L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmaWNhdGlvbi10ZXh0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlJlcXVpcmVkIE9wdGlvbnMgTWlzc2luZzwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHA+UGxlYXNlIHNlbGVjdCBhbGwgcmVxdWlyZWQgb3B0aW9ucyBiZWZvcmUgYWRkaW5nIHRvIGNhcnQ8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8c21hbGwgY2xhc3M9XCJub3RpZmljYXRpb24taGludFwiPkNsaWNrIHRvIGRpc21pc3M8L3NtYWxsPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cIm5vdGlmaWNhdGlvbi1jbG9zZVwiPiZ0aW1lczs8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCB0byBib2R5IGFuZCBzaG93IHdpdGggZmFkZSBlZmZlY3RcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkbm90aWZpY2F0aW9uKTtcbiAgICAgICAgJG5vdGlmaWNhdGlvbi5oaWRlKCkuZmFkZUluKDQwMCk7XG4gICAgICAgIFxuICAgICAgICAvLyBDbGljayB0byBkaXNtaXNzIGVudGlyZSBub3RpZmljYXRpb25cbiAgICAgICAgJG5vdGlmaWNhdGlvbi5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmZhZGVPdXQoMzAwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2xvc2UgYnV0dG9uIChwcmV2ZW50IGV2ZW50IGJ1YmJsaW5nKVxuICAgICAgICAkbm90aWZpY2F0aW9uLmZpbmQoJy5ub3RpZmljYXRpb24tY2xvc2UnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgJCh0aGlzKS5jbG9zZXN0KCcucmVxdWlyZWQtb3B0aW9ucy1ub3RpZmljYXRpb24nKS5mYWRlT3V0KDMwMCwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEF1dG8tZGlzbWlzcyBhZnRlciA1IHNlY29uZHNcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAkbm90aWZpY2F0aW9uLmZhZGVPdXQoNDAwLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDUwMDApO1xuICAgICAgICBcbiAgICB9XG5cbiAgICBzZXR1cEdsb2JhbEZ1bmN0aW9ucygpIHtcbiAgICAgICAgLy8gR2xvYmFsIHRlc3QgZnVuY3Rpb24gZm9yIGRlYnVnZ2luZ1xuICAgICAgICB3aW5kb3cuc2hvd1JlcXVpcmVkT3B0aW9uc05vdGlmaWNhdGlvbiA9IHRoaXMuc2hvd1JlcXVpcmVkT3B0aW9uc05vdGlmaWNhdGlvbi5iaW5kKHRoaXMpO1xuICAgICAgICB3aW5kb3cudGVzdE5vdGlmaWNhdGlvbiA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1JlcXVpcmVkT3B0aW9uc05vdGlmaWNhdGlvbigpO1xuICAgICAgICB9O1xuICAgICAgICBcbiAgICB9XG59XG5cbi8vIEluaXRpYWxpemUgd2hlbiBET00gaXMgcmVhZHlcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoKSA9PiB7XG4gICAgbmV3IE1vYmlsZVN0aWNreUNhcnRWYWxpZGF0b3IoKTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFTQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUFBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUdBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFhQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/js/theme/custom/mobile-sticky-cart-validator.js\n");

/***/ }),

/***/ "./assets/js/theme/custom/split-layout-carousel.js":
/*!*********************************************************!*\
  !*** ./assets/js/theme/custom/split-layout-carousel.js ***!
  \*********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SplitLayoutCarousel; });\n/**\n * Split Layout Carousel Override\n * Forces vertical thumbnail layout for split layout product pages\n */\nvar SplitLayoutCarousel = /*#__PURE__*/function () {\n  function SplitLayoutCarousel() {\n    // EMERGENCY: Block this entire class for volleyball nets page\n    if (window.customVolleyballNetsPage || window.blockAllCarousels || window.emergencyCarouselProtection) {\n      console.log('SPLIT-LAYOUT-CAROUSEL: Completely blocked for volleyball nets page');\n      // Return safe, non-functional methods\n      this.init = function () {\n        console.log('SplitLayoutCarousel.init() blocked');\n      };\n      this.destroy = function () {\n        console.log('SplitLayoutCarousel.destroy() blocked');\n      };\n      this.update = function () {\n        console.log('SplitLayoutCarousel.update() blocked');\n      };\n      return;\n    }\n    this.initCarouselOverride();\n    this.init(); // Initialize test helpers\n  }\n  var _proto = SplitLayoutCarousel.prototype;\n  _proto.initCarouselOverride = function initCarouselOverride() {\n    var _this = this;\n    // Pre-DOM ready setup for split layouts to prevent FOUC\n    this.setupPreInitialization();\n\n    // Wait for DOM to be ready\n    $(document).ready(function () {\n      _this.enforceVerticalLayout();\n\n      // Re-enforce after any slick initialization\n      setTimeout(function () {\n        // console.log('Re-enforcing layout after 500ms delay');\n        _this.enforceVerticalLayout();\n      }, 500);\n\n      // Also enforce after window resize\n      $(window).on('resize', function () {\n        setTimeout(function () {\n          _this.enforceVerticalLayout();\n        }, 100);\n      });\n\n      // Set up a fallback to ensure handlers are always set up\n      setTimeout(function () {\n        _this.setupNavigationHandlers($('.productView.split-layout'));\n      }, 1000);\n\n      // Set up swipe functionality after a delay to ensure everything is loaded\n      setTimeout(function () {\n        // console.log('Setting up swipe functionality');\n        _this.setupMainImageSwipe();\n      }, 1200);\n    });\n  };\n  _proto.setupPreInitialization = function setupPreInitialization() {\n    var _this2 = this;\n    // Early intervention before DOM ready for split layouts\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', function () {\n        _this2.preInitializeLayout();\n        _this2.interceptSlickInitialization();\n      });\n    } else {\n      this.preInitializeLayout();\n      this.interceptSlickInitialization();\n    }\n  };\n  _proto.interceptSlickInitialization = function interceptSlickInitialization() {\n    // Override Slick initialization for split layouts to prevent size jumping\n    var originalSlick = $.fn.slick;\n    var self = this;\n    $.fn.slick = function (options) {\n      // Check if this is a split layout thumbnail carousel\n      if (this.hasClass('productView-thumbnails') && this.closest('.productView.split-layout').length > 0) {\n        // console.log('Intercepting Slick initialization for split layout');\n\n        // Apply our fixes BEFORE Slick initializes\n        self.applyImmediateLayoutFixes(this);\n\n        // Override Slick options for split layout - FORCE VERTICAL\n        var isDesktop = window.innerWidth > 768;\n        var splitLayoutOptions = Object.assign({}, options, {\n          infinite: false,\n          arrows: false,\n          dots: false,\n          variableWidth: false,\n          adaptiveHeight: false,\n          slidesToShow: isDesktop ? 1 : 4,\n          slidesToScroll: 1,\n          vertical: isDesktop,\n          verticalSwiping: isDesktop,\n          // Force these settings\n          centerMode: false,\n          focusOnSelect: false,\n          responsive: isDesktop ? [] : [{\n            breakpoint: 768,\n            settings: {\n              vertical: false,\n              verticalSwiping: false,\n              slidesToShow: 4,\n              horizontal: true\n            }\n          }]\n        });\n\n        // Initialize Slick with our options\n        var result = originalSlick.call(this, splitLayoutOptions);\n\n        // Apply our fixes AFTER Slick initializes\n        setTimeout(function () {\n          self.enforceVerticalLayout();\n        }, 0);\n        return result;\n      }\n\n      // For non-split layout carousels, use original Slick\n      return originalSlick.call(this, options);\n    };\n\n    // Copy over any static properties\n    Object.keys(originalSlick).forEach(function (key) {\n      $.fn.slick[key] = originalSlick[key];\n    });\n  };\n  _proto.preInitializeLayout = function preInitializeLayout() {\n    var _this3 = this;\n    // Apply initial styles before Slick has a chance to initialize\n    var $splitLayout = $('.productView.split-layout');\n    if ($splitLayout.length === 0) return;\n    var $thumbnails = $splitLayout.find('.productView-thumbnails');\n    if ($thumbnails.length === 0) return;\n\n    // console.log('Pre-initializing split layout before Slick initialization');\n\n    // Set up event listeners to intercept Slick initialization\n    $thumbnails.on('beforeChange.splitLayout', function (event, slick) {\n      // console.log('Slick beforeChange event intercepted');\n      _this3.enforceVerticalLayout();\n    });\n\n    // Apply immediate layout fixes\n    this.applyImmediateLayoutFixes($thumbnails);\n\n    // Set up thumbnail click handlers early to override default behavior\n    this.setupThumbnailClickHandlers($('.productView.split-layout'));\n\n    // Disable hover behavior early to prevent unwanted image changes\n    this.disableThumbnailHover($('.productView.split-layout'));\n\n    // Set up main image swipe for mobile\n    this.setupMainImageSwipe();\n  };\n  _proto.applyImmediateLayoutFixes = function applyImmediateLayoutFixes($thumbnails) {\n    var isMobile = window.innerWidth <= 768;\n\n    // console.log('Applying immediate layout fixes for split layout - AGGRESSIVE MODE');\n\n    // Apply CSS classes instead of inline styles\n    $thumbnails.addClass('carousel-initialized');\n\n    // Set responsive state classes\n    if (isMobile) {\n      $thumbnails.removeClass('carousel-desktop').addClass('carousel-mobile');\n    } else {\n      $thumbnails.removeClass('carousel-mobile').addClass('carousel-desktop');\n    }\n\n    // Set image attributes for proper sizing (keep this for img elements)\n    var imageSelectors = ['img', 'li img', '.slick-slide img', '.productView-thumbnail img', '.productView-thumbnail-link img'];\n    imageSelectors.forEach(function (selector) {\n      $thumbnails.find(selector).each(function () {\n        // Only set HTML attributes, not inline styles\n        this.setAttribute('width', '80');\n        this.setAttribute('height', '80');\n      });\n    });\n\n    // console.log('Applied immediate layout fixes for split layout - COMPLETE');\n  };\n  _proto.enforceVerticalLayout = function enforceVerticalLayout() {\n    var _this4 = this;\n    var $splitLayout = $('.productView.split-layout');\n    if ($splitLayout.length === 0) return;\n    var $thumbnails = $splitLayout.find('.productView-thumbnails');\n    if ($thumbnails.length === 0) return;\n\n    // FORCE HIDE ALL SLICK ARROWS\n    $thumbnails.find('.slick-prev, .slick-next, .slick-arrow, button.slick-prev, button.slick-next, button.slick-arrow').remove();\n\n    // Set CSS classes for carousel initialization\n    $thumbnails.addClass('carousel-initialized');\n    var isMobile = window.innerWidth <= 768;\n\n    // console.log(`Enforcing layout for split layout - Mobile: ${isMobile}`);\n\n    // All products now use Slick mode - apply layout based on screen size\n    var $slickTrack = $thumbnails.find('.slick-track');\n\n    // Set responsive state classes (CSS handles all styling)\n    if (isMobile) {\n      $thumbnails.removeClass('carousel-desktop').addClass('carousel-mobile');\n    } else {\n      $thumbnails.removeClass('carousel-mobile').addClass('carousel-desktop');\n    }\n\n    // AGGRESSIVELY remove any inline width styles that Slick applies\n    var removeInlineWidths = function removeInlineWidths() {\n      $slickTrack.each(function () {\n        if (this.style) {\n          this.style.removeProperty('width');\n          this.style.removeProperty('min-width');\n          this.style.removeProperty('max-width');\n        }\n      });\n      $thumbnails.find('.slick-slide').each(function () {\n        if (this.style) {\n          this.style.removeProperty('width');\n          this.style.removeProperty('min-width');\n          this.style.removeProperty('max-width');\n        }\n      });\n    };\n\n    // Remove immediately and repeatedly\n    removeInlineWidths();\n    setTimeout(removeInlineWidths, 100);\n    setTimeout(removeInlineWidths, 500);\n\n    // Set up a MutationObserver to watch for style changes\n    if (window.MutationObserver && $slickTrack.length > 0) {\n      var observer = new MutationObserver(function () {\n        removeInlineWidths();\n      });\n      $slickTrack.each(function () {\n        observer.observe(this, {\n          attributes: true,\n          attributeFilter: ['style']\n        });\n      });\n    }\n\n    // Listen for slick events (all products use Slick now)\n    // If slick isn't initialized yet, listen for it\n    $thumbnails.on('init', function (event, slick) {\n      // console.log('Slick carousel initialized, enforcing layout');\n      setTimeout(function () {\n        _this4.enforceVerticalLayout();\n      }, 50);\n    });\n\n    // Also listen for reInit\n    $thumbnails.on('reInit', function (event, slick) {\n      // console.log('Slick carousel reinitialized, enforcing layout');\n      setTimeout(function () {\n        _this4.enforceVerticalLayout();\n      }, 50);\n    });\n\n    // Listen for breakpoint changes\n    $thumbnails.on('breakpoint', function (event, slick) {\n      // console.log('Slick carousel breakpoint changed, enforcing layout');\n      setTimeout(function () {\n        _this4.enforceVerticalLayout();\n      }, 50);\n    });\n\n    // Add click handlers for custom navigation arrows\n    this.setupNavigationHandlers($splitLayout);\n\n    // Add mobile-specific handlers\n    this.setupMobileHandlers($splitLayout);\n\n    // Override thumbnail click behavior for split layout\n    this.setupThumbnailClickHandlers($splitLayout);\n\n    // Disable hover behavior for split layout thumbnails\n    this.disableThumbnailHover($splitLayout);\n\n    // Set up main image swipe for mobile\n    this.setupMainImageSwipe();\n\n    // Update handlers on window resize\n    $(window).on('resize', function () {\n      setTimeout(function () {\n        _this4.setupMobileHandlers($splitLayout);\n        _this4.setupMainImageSwipe(); // Re-setup swipe on resize\n      }, 100);\n    });\n  };\n  _proto.setupNavigationHandlers = function setupNavigationHandlers($splitLayout) {\n    var _this5 = this;\n    var $thumbnails = $splitLayout.find('.productView-thumbnails');\n\n    // Use document-level delegation to capture clicks on the thumbnail container\n    $(document).off('click.split-layout-pseudo');\n\n    // Handle clicks on the thumbnails container to detect pseudo-element areas\n    $(document).on('click.split-layout-pseudo', '.productView.split-layout .productView-thumbnails', function (e) {\n      e.preventDefault();\n      var $container = $(e.currentTarget);\n      var containerRect = $container[0].getBoundingClientRect();\n      var clickY = e.clientY;\n      var containerTop = containerRect.top;\n      var containerBottom = containerRect.bottom;\n\n      // Define arrow areas - top 40px and bottom 40px of container\n      var arrowHeight = 40;\n      var upArrowBottom = containerTop + arrowHeight;\n      var downArrowTop = containerBottom - arrowHeight;\n      var $currentSplitLayout = $container.closest('.productView.split-layout');\n      var $slickList = $container.find('.slick-list');\n      if ($slickList.length === 0) {\n        return;\n      }\n\n      // Check if click is in the up arrow area (::before)\n      if (clickY >= containerTop && clickY <= upArrowBottom) {\n        // Use Slick's built-in navigation instead of manual scrolling\n        if ($container.hasClass('slick-initialized')) {\n          $container.slick('slickPrev');\n          _this5.updateScrollArrowVisibility($currentSplitLayout);\n        }\n      }\n      // Check if click is in the down arrow area (::after)\n      else if (clickY >= downArrowTop && clickY <= containerBottom) {\n        // Use Slick's built-in navigation instead of manual scrolling\n        if ($container.hasClass('slick-initialized')) {\n          $container.slick('slickNext');\n          _this5.updateScrollArrowVisibility($currentSplitLayout);\n        }\n      }\n    });\n\n    // Update arrow visibility when Slick is initialized and on slide changes\n    $thumbnails.on('init afterChange', function (event, slick) {\n      setTimeout(function () {\n        _this5.updateScrollArrowVisibility($splitLayout);\n      }, 50);\n    });\n\n    // ALTERNATIVE: Add direct click handlers to the arrow areas\n    // This is a backup method in case the pseudo-element detection doesn't work\n    try {\n      $thumbnails.each(function (index) {\n        var $thumb = $(this);\n\n        // Create invisible overlay divs for the arrow areas\n        if ($thumb.find('.arrow-overlay-up, .arrow-overlay-down').length === 0) {\n          var $upOverlay = $('<div class=\"arrow-overlay-up\" style=\"position: absolute; top: 0; left: 0; right: 0; height: 40px; z-index: 25; cursor: pointer; background: transparent; pointer-events: auto;\"></div>');\n          var $downOverlay = $('<div class=\"arrow-overlay-down\" style=\"position: absolute; bottom: 0; left: 0; right: 0; height: 40px; z-index: 25; cursor: pointer; background: transparent; pointer-events: auto;\"></div>');\n          $thumb.css('position', 'relative').append($upOverlay, $downOverlay);\n          $upOverlay.on('click', function (e) {\n            // Only handle clicks that are NOT on thumbnail images or their containers\n            var $target = $(e.target);\n            if ($target.is('img') || $target.closest('[data-image-gallery-item]').length > 0 || $target.hasClass('productView-thumbnail')) {\n              // Let thumbnail clicks pass through\n              return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n\n            // Direct scrolling approach - bypass Slick completely\n            var $slickList = $thumb.find('.slick-list');\n            if ($slickList.length > 0) {\n              var currentScrollTop = $slickList.scrollTop();\n              var scrollAmount = 88; // thumbnail height (80px) + gap (8px)\n              var newScrollTop = Math.max(0, currentScrollTop - scrollAmount);\n              $slickList.animate({\n                scrollTop: newScrollTop\n              }, 300);\n            }\n          });\n          $downOverlay.on('click', function (e) {\n            // Only handle clicks that are NOT on thumbnail images or their containers\n            var $target = $(e.target);\n            if ($target.is('img') || $target.closest('[data-image-gallery-item]').length > 0 || $target.hasClass('productView-thumbnail')) {\n              // Let thumbnail clicks pass through\n              return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n\n            // Direct scrolling approach - bypass Slick completely\n            var $slickList = $thumb.find('.slick-list');\n            if ($slickList.length > 0) {\n              var currentScrollTop = $slickList.scrollTop();\n              var scrollAmount = 88; // thumbnail height (80px) + gap (8px)\n              var maxScrollTop = $slickList[0].scrollHeight - $slickList.outerHeight();\n              var newScrollTop = Math.min(maxScrollTop, currentScrollTop + scrollAmount);\n              $slickList.animate({\n                scrollTop: newScrollTop\n              }, 300);\n            }\n          });\n        }\n      });\n    } catch (error) {\n      console.error('Error setting up overlay handlers:', error);\n    }\n  };\n  _proto.updateScrollArrowVisibility = function updateScrollArrowVisibility($splitLayout) {\n    var $thumbnails = $splitLayout.find('.productView-thumbnails');\n    if (!$thumbnails.hasClass('slick-initialized')) {\n      // Slick not initialized yet\n      $thumbnails.removeClass('can-scroll-up can-scroll-down');\n      return;\n    }\n\n    // Get Slick instance data\n    var slickData = $thumbnails.slick('getSlick');\n    if (!slickData) return;\n    var currentSlide = slickData.currentSlide;\n    var slideCount = slickData.slideCount;\n    var slidesToShow = slickData.options.slidesToShow;\n    if (slideCount <= slidesToShow) {\n      // All slides are visible - hide both arrows\n      $thumbnails.removeClass('can-scroll-up can-scroll-down');\n      return;\n    }\n\n    // Show/hide up arrow (::before) based on current slide\n    if (currentSlide <= 0) {\n      // At or near the first slide - hide up arrow\n      $thumbnails.removeClass('can-scroll-up');\n    } else {\n      // Not at first slide - show up arrow\n      $thumbnails.addClass('can-scroll-up');\n    }\n\n    // Show/hide down arrow (::after) based on current slide\n    if (currentSlide >= slideCount - slidesToShow) {\n      // At or near the last slide - hide down arrow\n      $thumbnails.removeClass('can-scroll-down');\n    } else {\n      // Not at last slide - show down arrow\n      $thumbnails.addClass('can-scroll-down');\n    }\n  };\n  _proto.setupMobileHandlers = function setupMobileHandlers($splitLayout) {\n    var _this6 = this;\n    // Only set up mobile handlers on mobile devices\n    if (window.innerWidth > 768) return;\n    var $thumbnails = $splitLayout.find('.productView-thumbnails');\n    // console.log('Setting up mobile horizontal scroll handlers');\n\n    // Handle horizontal scroll for mobile\n    $(document).off('click.mobile-horizontal');\n    $(document).on('click.mobile-horizontal', '.productView.split-layout .productView-thumbnails', function (e) {\n      // Only on mobile\n      if (window.innerWidth > 768) return;\n      e.preventDefault();\n      var $container = $(e.currentTarget);\n      var containerRect = $container[0].getBoundingClientRect();\n      var clickX = e.clientX - containerRect.left;\n      var containerWidth = containerRect.width;\n\n      // Define click zones for horizontal scrolling\n      var arrowWidth = 40; // Width of the horizontal arrows\n      var leftArrowZone = arrowWidth;\n      var rightArrowZone = containerWidth - arrowWidth;\n\n      // console.log('Mobile horizontal click detected:', {\n      //     clickX,\n      //     containerWidth,\n      //     leftArrowZone,\n      //     rightArrowZone\n      // });\n\n      var $slickList = $container.find('.slick-list');\n      if ($slickList.length === 0) return;\n      if (clickX <= leftArrowZone) {\n        // Clicked in left arrow area - scroll left\n        // console.log('Mobile left arrow area clicked');\n        var currentScrollLeft = $slickList.scrollLeft();\n        var scrollAmount = 92; // thumbnail width (80px) + gap (12px)\n        var newScrollLeft = Math.max(0, currentScrollLeft - scrollAmount);\n        $slickList.animate({\n          scrollLeft: newScrollLeft\n        }, 300, function () {\n          _this6.updateMobileArrowVisibility($splitLayout);\n        });\n      } else if (clickX >= rightArrowZone) {\n        // Clicked in right arrow area - scroll right\n        // console.log('Mobile right arrow area clicked');\n        var _currentScrollLeft = $slickList.scrollLeft();\n        var _scrollAmount = 92; // thumbnail width (80px) + gap (12px)\n        var maxScrollLeft = $slickList[0].scrollWidth - $slickList.outerWidth();\n        var _newScrollLeft = Math.min(maxScrollLeft, _currentScrollLeft + _scrollAmount);\n        $slickList.animate({\n          scrollLeft: _newScrollLeft\n        }, 300, function () {\n          _this6.updateMobileArrowVisibility($splitLayout);\n        });\n      }\n    });\n\n    // Set up mobile arrow visibility\n    $thumbnails.on('init', function (event, slick) {\n      if (window.innerWidth <= 768) {\n        setTimeout(function () {\n          _this6.updateMobileArrowVisibility($splitLayout);\n          var $slickList = $splitLayout.find('.slick-list');\n          if ($slickList.length > 0) {\n            $slickList.on('scroll', function () {\n              _this6.updateMobileArrowVisibility($splitLayout);\n            });\n          }\n        }, 100);\n      }\n    });\n  };\n  _proto.updateMobileArrowVisibility = function updateMobileArrowVisibility($splitLayout) {\n    if (window.innerWidth > 768) return; // Only for mobile\n\n    var $thumbnails = $splitLayout.find('.productView-thumbnails');\n    var $slickList = $splitLayout.find('.slick-list');\n    if ($slickList.length === 0) return;\n    var scrollLeft = $slickList.scrollLeft();\n    var scrollWidth = $slickList[0].scrollWidth;\n    var clientWidth = $slickList.outerWidth();\n    var maxScrollLeft = scrollWidth - clientWidth;\n    var isScrollable = scrollWidth > clientWidth;\n\n    // console.log('Updating mobile horizontal arrow visibility:', {\n    //     scrollLeft,\n    //     scrollWidth,\n    //     clientWidth,\n    //     maxScrollLeft,\n    //     isScrollable\n    // });\n\n    if (!isScrollable) {\n      $thumbnails.removeClass('can-scroll-left can-scroll-right');\n      return;\n    }\n\n    // Show/hide left arrow\n    if (scrollLeft <= 5) {\n      $thumbnails.removeClass('can-scroll-left');\n    } else {\n      $thumbnails.addClass('can-scroll-left');\n    }\n\n    // Show/hide right arrow\n    if (scrollLeft >= maxScrollLeft - 5) {\n      $thumbnails.removeClass('can-scroll-right');\n    } else {\n      $thumbnails.addClass('can-scroll-right');\n    }\n  };\n  _proto.setupThumbnailClickHandlers = function setupThumbnailClickHandlers($splitLayout) {\n    var _this7 = this;\n    // Remove existing thumbnail click handlers that open PhotoSwipe\n    var $thumbnails = $splitLayout.find('.productView-thumbnails');\n\n    // Unbind existing click AND hover handlers from image gallery\n    $thumbnails.find('[data-image-gallery-item], [data-image-gallery-video]').off('click mouseenter');\n\n    // Add our custom click handler for thumbnails\n    $(document).off('click.split-layout-thumbnails');\n    $(document).on('click.split-layout-thumbnails', '.productView.split-layout .productView-thumbnails [data-image-gallery-item], .productView.split-layout .productView-thumbnails [data-image-gallery-video]', function (e) {\n      e.preventDefault();\n      e.stopPropagation();\n      var $target = $(e.currentTarget);\n      var type = $target.attr('data-type');\n\n      // Try to find the image gallery instance from the global product details\n      var imageGallery = null;\n\n      // Check if there's a global product details instance\n      if (window.productDetails && window.productDetails.imageGallery) {\n        imageGallery = window.productDetails.imageGallery;\n      }\n\n      // Alternative: check if it's stored on the productView element\n      if (!imageGallery) {\n        var $productView = $target.closest('.productView');\n        imageGallery = $productView.data('imageGallery');\n      }\n      if (imageGallery && typeof imageGallery.selectNewImage === 'function') {\n        // Use the existing selectNewImage method to change the main image\n        try {\n          imageGallery.selectNewImage(e);\n        } catch (error) {\n          // Fallback to manual method\n          _this7.changeMainImageManually($target, type);\n        }\n      } else {\n        // Fallback: manually change the main image\n        _this7.changeMainImageManually($target, type);\n      }\n    });\n  };\n  _proto.disableThumbnailHover = function disableThumbnailHover($splitLayout) {\n    // Continuously disable hover functionality for split layout thumbnails\n    var $thumbnails = $splitLayout.find('.productView-thumbnails');\n\n    // console.log('Disabling thumbnail hover for split layout');\n\n    // Remove any hover event listeners\n    $thumbnails.find('[data-image-gallery-item], [data-image-gallery-video]').off('mouseenter mouseover hover');\n\n    // Add a no-op hover handler to prevent future hover events\n    $(document).off('mouseenter.split-layout-no-hover');\n    $(document).on('mouseenter.split-layout-no-hover', '.productView.split-layout .productView-thumbnails [data-image-gallery-item], .productView.split-layout .productView-thumbnails [data-image-gallery-video]', function (e) {\n      // Prevent hover from changing main image\n      e.preventDefault();\n      e.stopImmediatePropagation();\n      return false;\n    });\n\n    // console.log('Thumbnail hover disabled for split layout');\n  };\n  _proto.changeMainImageManually = function changeMainImageManually($target, type) {\n    // Manual method to change main image if image gallery instance is not available\n    var $mainImage = $('.productView-image [data-main-image]');\n    var $mainImageContainer = $('.productView-image .productView-img-container a');\n    if ($mainImage.length === 0) return;\n\n    // Get the new image data from the thumbnail\n    var newImageUrl = $target.attr(\"data-\" + type + \"-gallery-new-image-url\");\n    var newImageSrcset = $target.attr(\"data-\" + type + \"-gallery-new-image-srcset\");\n    var zoomImageUrl = $target.attr(\"data-\" + type + \"-gallery-zoom-image-url\");\n    var imageAlt = $target.find('img').attr('alt');\n    var imageIndex = $target.attr('data-index');\n    if (!newImageUrl) return;\n\n    // Update the main image\n    $mainImage.attr({\n      src: newImageUrl,\n      srcset: newImageSrcset || '',\n      alt: imageAlt || '',\n      title: imageAlt || ''\n    });\n\n    // Update the main image container link for PhotoSwipe\n    if ($mainImageContainer.length > 0) {\n      $mainImageContainer.attr({\n        'data-index': imageIndex,\n        'data-type': type,\n        'href': zoomImageUrl || newImageUrl\n      });\n    }\n\n    // Update active thumbnail state\n    $('.productView-thumbnails [data-image-gallery-item], .productView-thumbnails [data-image-gallery-video]').removeClass('is-active');\n    $target.addClass('is-active');\n\n    // Update the main image zoom functionality if it exists\n    var $zoomContainer = $('.productView-image [data-zoom-image]');\n    if ($zoomContainer.length > 0 && zoomImageUrl) {\n      $zoomContainer.attr('data-zoom-image', zoomImageUrl);\n    }\n    console.log('Split Layout: Changed main image to index', imageIndex, 'src:', newImageUrl);\n  };\n  _proto.setupMainImageSwipe = function setupMainImageSwipe() {\n    var _this8 = this;\n    // console.log('Setting up main image swipe handlers');\n\n    var $mainImageContainer = $('.productView.split-layout .productView-image .productView-img-container');\n    if ($mainImageContainer.length === 0) {\n      // console.log('No main image container found for swipe');\n      return;\n    }\n\n    // console.log('Found main image container:', $mainImageContainer[0]);\n\n    // Set up touch events for mobile and device emulation\n    var startX = null;\n    var startY = null;\n    var isScrolling = null;\n\n    // Remove any existing swipe handlers\n    $mainImageContainer.off('.swipe');\n\n    // Touch start\n    $mainImageContainer.on('touchstart.swipe', function (e) {\n      // console.log('Touch start detected on main image:', e.originalEvent);\n      var touch = e.originalEvent.touches[0];\n      startX = touch.clientX;\n      startY = touch.clientY;\n      isScrolling = null;\n\n      // console.log('Touch start coordinates:', { startX, startY });\n\n      // Add visual feedback\n      $mainImageContainer.css('opacity', '0.9');\n    });\n\n    // Touch move\n    $mainImageContainer.on('touchmove.swipe', function (e) {\n      if (!startX || !startY) return;\n      var touch = e.originalEvent.touches[0];\n      var deltaX = touch.clientX - startX;\n      var deltaY = touch.clientY - startY;\n\n      // console.log('Touch move - deltas:', { deltaX, deltaY });\n\n      // Determine if user is scrolling vertically or swiping horizontally\n      if (isScrolling === null) {\n        isScrolling = Math.abs(deltaY) > Math.abs(deltaX);\n        // console.log('Determined scrolling direction:', isScrolling ? 'vertical' : 'horizontal');\n      }\n\n      // If horizontal swipe, prevent default scrolling\n      if (!isScrolling && Math.abs(deltaX) > 10) {\n        e.preventDefault();\n        // console.log('Horizontal swipe detected, preventing default');\n\n        // Add visual feedback during swipe\n        var translateX = deltaX * 0.1; // Subtle movement feedback\n        $mainImageContainer.css('transform', \"translateX(\" + translateX + \"px)\");\n      }\n    });\n\n    // Touch end\n    $mainImageContainer.on('touchend.swipe', function (e) {\n      // console.log('Touch end detected on main image');\n\n      // Remove visual feedback\n      $mainImageContainer.css({\n        'opacity': '1',\n        'transform': 'none'\n      });\n      if (!startX || !startY || isScrolling) {\n        // console.log('Touch end - no swipe action (scrolling or no start position)');\n        startX = null;\n        startY = null;\n        isScrolling = null;\n        return;\n      }\n      var touch = e.originalEvent.changedTouches[0];\n      var deltaX = touch.clientX - startX;\n      var deltaY = touch.clientY - startY;\n\n      // Minimum swipe distance\n      var minSwipeDistance = 50;\n\n      // console.log('Touch end - analyzing swipe:', { deltaX, deltaY, minSwipeDistance });\n\n      // Check for horizontal swipe\n      if (Math.abs(deltaX) > minSwipeDistance && Math.abs(deltaY) < 100) {\n        if (deltaX > 0) {\n          // Swipe right - go to previous image\n          // console.log('Swipe right detected - going to previous image');\n          _this8.navigateToImage('previous');\n        } else {\n          // Swipe left - go to next image\n          // console.log('Swipe left detected - going to next image');\n          _this8.navigateToImage('next');\n        }\n      } else {\n        // console.log('No swipe action - insufficient distance or vertical movement');\n      }\n\n      // Reset values\n      startX = null;\n      startY = null;\n      isScrolling = null;\n    });\n\n    // Mouse events for desktop testing (when NOT in device emulation mode)\n    var mouseDown = false;\n    var mouseStartX = null;\n    var mouseStartY = null;\n\n    // Only add mouse events if touch is NOT supported (pure desktop)\n    if (!('ontouchstart' in window)) {\n      // console.log('Touch not supported - adding mouse events for desktop testing');\n\n      $mainImageContainer.on('mousedown.swipe', function (e) {\n        // console.log('Mouse down detected on main image (desktop mode)');\n        mouseDown = true;\n        mouseStartX = e.clientX;\n        mouseStartY = e.clientY;\n        $mainImageContainer.css('opacity', '0.9');\n        e.preventDefault();\n      });\n      $mainImageContainer.on('mousemove.swipe', function (e) {\n        if (!mouseDown) return;\n        var deltaX = e.clientX - mouseStartX;\n        var deltaY = e.clientY - mouseStartY;\n\n        // Prevent text selection\n        e.preventDefault();\n\n        // Visual feedback during drag\n        if (Math.abs(deltaX) > 10) {\n          $mainImageContainer.css('transform', \"translateX(\" + deltaX * 0.2 + \"px)\");\n        }\n      });\n      $mainImageContainer.on('mouseup.swipe', function (e) {\n        if (!mouseDown) return;\n\n        // console.log('Mouse up detected on main image (desktop mode)');\n        mouseDown = false;\n\n        // Reset visual feedback\n        $mainImageContainer.css({\n          'opacity': '1',\n          'transform': 'none'\n        });\n        var deltaX = e.clientX - mouseStartX;\n        var deltaY = e.clientY - mouseStartY;\n        var minSwipeDistance = 50;\n\n        // console.log('Mouse drag - analyzing swipe:', { deltaX, deltaY, minSwipeDistance });\n\n        // Check for horizontal swipe\n        if (Math.abs(deltaX) > minSwipeDistance && Math.abs(deltaY) < 100) {\n          if (deltaX > 0) {\n            // Drag right - go to previous image\n            // console.log('Mouse drag right detected - going to previous image');\n            _this8.navigateToImage('previous');\n          } else {\n            // Drag left - go to next image\n            // console.log('Mouse drag left detected - going to next image');\n            _this8.navigateToImage('next');\n          }\n        }\n      });\n\n      // Handle mouse leave to reset state\n      $mainImageContainer.on('mouseleave.swipe', function () {\n        if (mouseDown) {\n          mouseDown = false;\n          $mainImageContainer.css({\n            'opacity': '1',\n            'transform': 'none'\n          });\n        }\n      });\n    } else {\n      // console.log('Touch supported - skipping mouse events (will use touch events in device emulation)');\n    }\n\n    // console.log('Main image swipe handlers set up');\n  };\n  _proto.navigateToImage = function navigateToImage(direction) {\n    var $thumbnails = $('.productView.split-layout .productView-thumbnails');\n    var $allThumbnails = $thumbnails.find('[data-image-gallery-item], [data-image-gallery-video]');\n    var $currentActive = $allThumbnails.filter('.is-active');\n    if ($allThumbnails.length === 0) return;\n    var $nextThumbnail = null;\n    if ($currentActive.length === 0) {\n      // No active thumbnail, start with first\n      $nextThumbnail = $allThumbnails.first();\n    } else {\n      var currentIndex = $allThumbnails.index($currentActive);\n      if (direction === 'next') {\n        var nextIndex = (currentIndex + 1) % $allThumbnails.length;\n        $nextThumbnail = $allThumbnails.eq(nextIndex);\n      } else if (direction === 'previous') {\n        var prevIndex = currentIndex === 0 ? $allThumbnails.length - 1 : currentIndex - 1;\n        $nextThumbnail = $allThumbnails.eq(prevIndex);\n      }\n    }\n    if ($nextThumbnail && $nextThumbnail.length > 0) {\n      // console.log(`Navigating to ${direction} image via swipe`);\n\n      // Trigger click on the thumbnail to change the main image\n      var clickEvent = $.Event('click', {\n        currentTarget: $nextThumbnail[0],\n        preventDefault: function preventDefault() {},\n        stopPropagation: function stopPropagation() {}\n      });\n      var type = $nextThumbnail.attr('data-type');\n\n      // Try to use image gallery instance first\n      var imageGallery = null;\n      if (window.productDetails && window.productDetails.imageGallery) {\n        imageGallery = window.productDetails.imageGallery;\n      }\n      if (imageGallery && typeof imageGallery.selectNewImage === 'function') {\n        imageGallery.selectNewImage(clickEvent);\n      } else {\n        this.changeMainImageManually($nextThumbnail, type);\n      }\n    }\n  }\n\n  // Helper method for testing swipe functionality from desktop console\n  ;\n  _proto.testSwipe = function testSwipe(direction) {\n    if (direction === void 0) {\n      direction = 'next';\n    }\n    // console.log(`Testing swipe ${direction} from console`);\n    this.navigateToImage(direction);\n  }\n\n  // Expose this instance globally for testing\n  ;\n  _proto.init = function init() {\n    window.splitLayoutCarousel = this;\n    // console.log('Split layout carousel instance exposed as window.splitLayoutCarousel');\n    // console.log('Test swipe with: window.splitLayoutCarousel.testSwipe(\"next\") or window.splitLayoutCarousel.testSwipe(\"previous\")');\n  };\n  return SplitLayoutCarousel;\n}();\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.min.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvanMvdGhlbWUvY3VzdG9tL3NwbGl0LWxheW91dC1jYXJvdXNlbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2Fzc2V0cy9qcy90aGVtZS9jdXN0b20vc3BsaXQtbGF5b3V0LWNhcm91c2VsLmpzPzdkOGYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBTcGxpdCBMYXlvdXQgQ2Fyb3VzZWwgT3ZlcnJpZGVcbiAqIEZvcmNlcyB2ZXJ0aWNhbCB0aHVtYm5haWwgbGF5b3V0IGZvciBzcGxpdCBsYXlvdXQgcHJvZHVjdCBwYWdlc1xuICovXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNwbGl0TGF5b3V0Q2Fyb3VzZWwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBFTUVSR0VOQ1k6IEJsb2NrIHRoaXMgZW50aXJlIGNsYXNzIGZvciB2b2xsZXliYWxsIG5ldHMgcGFnZVxuICAgICAgICBpZiAod2luZG93LmN1c3RvbVZvbGxleWJhbGxOZXRzUGFnZSB8fCB3aW5kb3cuYmxvY2tBbGxDYXJvdXNlbHMgfHwgd2luZG93LmVtZXJnZW5jeUNhcm91c2VsUHJvdGVjdGlvbikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NQTElULUxBWU9VVC1DQVJPVVNFTDogQ29tcGxldGVseSBibG9ja2VkIGZvciB2b2xsZXliYWxsIG5ldHMgcGFnZScpO1xuICAgICAgICAgICAgLy8gUmV0dXJuIHNhZmUsIG5vbi1mdW5jdGlvbmFsIG1ldGhvZHNcbiAgICAgICAgICAgIHRoaXMuaW5pdCA9ICgpID0+IHsgY29uc29sZS5sb2coJ1NwbGl0TGF5b3V0Q2Fyb3VzZWwuaW5pdCgpIGJsb2NrZWQnKTsgfTtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveSA9ICgpID0+IHsgY29uc29sZS5sb2coJ1NwbGl0TGF5b3V0Q2Fyb3VzZWwuZGVzdHJveSgpIGJsb2NrZWQnKTsgfTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlID0gKCkgPT4geyBjb25zb2xlLmxvZygnU3BsaXRMYXlvdXRDYXJvdXNlbC51cGRhdGUoKSBibG9ja2VkJyk7IH07XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmluaXRDYXJvdXNlbE92ZXJyaWRlKCk7XG4gICAgICAgIHRoaXMuaW5pdCgpOyAvLyBJbml0aWFsaXplIHRlc3QgaGVscGVyc1xuICAgIH1cblxuICAgIGluaXRDYXJvdXNlbE92ZXJyaWRlKCkge1xuICAgICAgICAvLyBQcmUtRE9NIHJlYWR5IHNldHVwIGZvciBzcGxpdCBsYXlvdXRzIHRvIHByZXZlbnQgRk9VQ1xuICAgICAgICB0aGlzLnNldHVwUHJlSW5pdGlhbGl6YXRpb24oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFdhaXQgZm9yIERPTSB0byBiZSByZWFkeVxuICAgICAgICAkKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmVuZm9yY2VWZXJ0aWNhbExheW91dCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZS1lbmZvcmNlIGFmdGVyIGFueSBzbGljayBpbml0aWFsaXphdGlvblxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1JlLWVuZm9yY2luZyBsYXlvdXQgYWZ0ZXIgNTAwbXMgZGVsYXknKTtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZm9yY2VWZXJ0aWNhbExheW91dCgpO1xuICAgICAgICAgICAgfSwgNTAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWxzbyBlbmZvcmNlIGFmdGVyIHdpbmRvdyByZXNpemVcbiAgICAgICAgICAgICQod2luZG93KS5vbigncmVzaXplJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuZm9yY2VWZXJ0aWNhbExheW91dCgpO1xuICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2V0IHVwIGEgZmFsbGJhY2sgdG8gZW5zdXJlIGhhbmRsZXJzIGFyZSBhbHdheXMgc2V0IHVwXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwTmF2aWdhdGlvbkhhbmRsZXJzKCQoJy5wcm9kdWN0Vmlldy5zcGxpdC1sYXlvdXQnKSk7XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2V0IHVwIHN3aXBlIGZ1bmN0aW9uYWxpdHkgYWZ0ZXIgYSBkZWxheSB0byBlbnN1cmUgZXZlcnl0aGluZyBpcyBsb2FkZWRcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdTZXR0aW5nIHVwIHN3aXBlIGZ1bmN0aW9uYWxpdHknKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldHVwTWFpbkltYWdlU3dpcGUoKTtcbiAgICAgICAgICAgIH0sIDEyMDApO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgc2V0dXBQcmVJbml0aWFsaXphdGlvbigpIHtcbiAgICAgICAgLy8gRWFybHkgaW50ZXJ2ZW50aW9uIGJlZm9yZSBET00gcmVhZHkgZm9yIHNwbGl0IGxheW91dHNcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnByZUluaXRpYWxpemVMYXlvdXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVyY2VwdFNsaWNrSW5pdGlhbGl6YXRpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5wcmVJbml0aWFsaXplTGF5b3V0KCk7XG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdFNsaWNrSW5pdGlhbGl6YXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBpbnRlcmNlcHRTbGlja0luaXRpYWxpemF0aW9uKCkge1xuICAgICAgICAvLyBPdmVycmlkZSBTbGljayBpbml0aWFsaXphdGlvbiBmb3Igc3BsaXQgbGF5b3V0cyB0byBwcmV2ZW50IHNpemUganVtcGluZ1xuICAgICAgICBjb25zdCBvcmlnaW5hbFNsaWNrID0gJC5mbi5zbGljaztcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIFxuICAgICAgICAkLmZuLnNsaWNrID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIHNwbGl0IGxheW91dCB0aHVtYm5haWwgY2Fyb3VzZWxcbiAgICAgICAgICAgIGlmICh0aGlzLmhhc0NsYXNzKCdwcm9kdWN0Vmlldy10aHVtYm5haWxzJykgJiYgdGhpcy5jbG9zZXN0KCcucHJvZHVjdFZpZXcuc3BsaXQtbGF5b3V0JykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdJbnRlcmNlcHRpbmcgU2xpY2sgaW5pdGlhbGl6YXRpb24gZm9yIHNwbGl0IGxheW91dCcpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIEFwcGx5IG91ciBmaXhlcyBCRUZPUkUgU2xpY2sgaW5pdGlhbGl6ZXNcbiAgICAgICAgICAgICAgICBzZWxmLmFwcGx5SW1tZWRpYXRlTGF5b3V0Rml4ZXModGhpcyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgU2xpY2sgb3B0aW9ucyBmb3Igc3BsaXQgbGF5b3V0IC0gRk9SQ0UgVkVSVElDQUxcbiAgICAgICAgICAgICAgICBjb25zdCBpc0Rlc2t0b3AgPSB3aW5kb3cuaW5uZXJXaWR0aCA+IDc2ODtcbiAgICAgICAgICAgICAgICBjb25zdCBzcGxpdExheW91dE9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIGluZmluaXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZG90czogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlV2lkdGg6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBhZGFwdGl2ZUhlaWdodDogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogaXNEZXNrdG9wID8gMSA6IDQsXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxLFxuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbDogaXNEZXNrdG9wLFxuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbFN3aXBpbmc6IGlzRGVza3RvcCxcbiAgICAgICAgICAgICAgICAgICAgLy8gRm9yY2UgdGhlc2Ugc2V0dGluZ3NcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyTW9kZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGZvY3VzT25TZWxlY3Q6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zaXZlOiBpc0Rlc2t0b3AgPyBbXSA6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA3NjgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbFN3aXBpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvcml6b250YWw6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIFxuXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBTbGljayB3aXRoIG91ciBvcHRpb25zXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb3JpZ2luYWxTbGljay5jYWxsKHRoaXMsIHNwbGl0TGF5b3V0T3B0aW9ucyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQXBwbHkgb3VyIGZpeGVzIEFGVEVSIFNsaWNrIGluaXRpYWxpemVzXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZW5mb3JjZVZlcnRpY2FsTGF5b3V0KCk7XG4gICAgICAgICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRm9yIG5vbi1zcGxpdCBsYXlvdXQgY2Fyb3VzZWxzLCB1c2Ugb3JpZ2luYWwgU2xpY2tcbiAgICAgICAgICAgIHJldHVybiBvcmlnaW5hbFNsaWNrLmNhbGwodGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBDb3B5IG92ZXIgYW55IHN0YXRpYyBwcm9wZXJ0aWVzXG4gICAgICAgIE9iamVjdC5rZXlzKG9yaWdpbmFsU2xpY2spLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICQuZm4uc2xpY2tba2V5XSA9IG9yaWdpbmFsU2xpY2tba2V5XTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHByZUluaXRpYWxpemVMYXlvdXQoKSB7XG4gICAgICAgIC8vIEFwcGx5IGluaXRpYWwgc3R5bGVzIGJlZm9yZSBTbGljayBoYXMgYSBjaGFuY2UgdG8gaW5pdGlhbGl6ZVxuICAgICAgICBjb25zdCAkc3BsaXRMYXlvdXQgPSAkKCcucHJvZHVjdFZpZXcuc3BsaXQtbGF5b3V0Jyk7XG4gICAgICAgIGlmICgkc3BsaXRMYXlvdXQubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBjb25zdCAkdGh1bWJuYWlscyA9ICRzcGxpdExheW91dC5maW5kKCcucHJvZHVjdFZpZXctdGh1bWJuYWlscycpO1xuICAgICAgICBpZiAoJHRodW1ibmFpbHMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygnUHJlLWluaXRpYWxpemluZyBzcGxpdCBsYXlvdXQgYmVmb3JlIFNsaWNrIGluaXRpYWxpemF0aW9uJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgdXAgZXZlbnQgbGlzdGVuZXJzIHRvIGludGVyY2VwdCBTbGljayBpbml0aWFsaXphdGlvblxuICAgICAgICAkdGh1bWJuYWlscy5vbignYmVmb3JlQ2hhbmdlLnNwbGl0TGF5b3V0JywgKGV2ZW50LCBzbGljaykgPT4ge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1NsaWNrIGJlZm9yZUNoYW5nZSBldmVudCBpbnRlcmNlcHRlZCcpO1xuICAgICAgICAgICAgdGhpcy5lbmZvcmNlVmVydGljYWxMYXlvdXQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBcHBseSBpbW1lZGlhdGUgbGF5b3V0IGZpeGVzXG4gICAgICAgIHRoaXMuYXBwbHlJbW1lZGlhdGVMYXlvdXRGaXhlcygkdGh1bWJuYWlscyk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgdXAgdGh1bWJuYWlsIGNsaWNrIGhhbmRsZXJzIGVhcmx5IHRvIG92ZXJyaWRlIGRlZmF1bHQgYmVoYXZpb3JcbiAgICAgICAgdGhpcy5zZXR1cFRodW1ibmFpbENsaWNrSGFuZGxlcnMoJCgnLnByb2R1Y3RWaWV3LnNwbGl0LWxheW91dCcpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIERpc2FibGUgaG92ZXIgYmVoYXZpb3IgZWFybHkgdG8gcHJldmVudCB1bndhbnRlZCBpbWFnZSBjaGFuZ2VzXG4gICAgICAgIHRoaXMuZGlzYWJsZVRodW1ibmFpbEhvdmVyKCQoJy5wcm9kdWN0Vmlldy5zcGxpdC1sYXlvdXQnKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgdXAgbWFpbiBpbWFnZSBzd2lwZSBmb3IgbW9iaWxlXG4gICAgICAgIHRoaXMuc2V0dXBNYWluSW1hZ2VTd2lwZSgpO1xuICAgIH1cbiAgICBcbiAgICBhcHBseUltbWVkaWF0ZUxheW91dEZpeGVzKCR0aHVtYm5haWxzKSB7XG4gICAgICAgIGNvbnN0IGlzTW9iaWxlID0gd2luZG93LmlubmVyV2lkdGggPD0gNzY4O1xuICAgICAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0FwcGx5aW5nIGltbWVkaWF0ZSBsYXlvdXQgZml4ZXMgZm9yIHNwbGl0IGxheW91dCAtIEFHR1JFU1NJVkUgTU9ERScpO1xuICAgICAgICBcbiAgICAgICAgLy8gQXBwbHkgQ1NTIGNsYXNzZXMgaW5zdGVhZCBvZiBpbmxpbmUgc3R5bGVzXG4gICAgICAgICR0aHVtYm5haWxzLmFkZENsYXNzKCdjYXJvdXNlbC1pbml0aWFsaXplZCcpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0IHJlc3BvbnNpdmUgc3RhdGUgY2xhc3Nlc1xuICAgICAgICBpZiAoaXNNb2JpbGUpIHtcbiAgICAgICAgICAgICR0aHVtYm5haWxzLnJlbW92ZUNsYXNzKCdjYXJvdXNlbC1kZXNrdG9wJykuYWRkQ2xhc3MoJ2Nhcm91c2VsLW1vYmlsZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHRodW1ibmFpbHMucmVtb3ZlQ2xhc3MoJ2Nhcm91c2VsLW1vYmlsZScpLmFkZENsYXNzKCdjYXJvdXNlbC1kZXNrdG9wJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNldCBpbWFnZSBhdHRyaWJ1dGVzIGZvciBwcm9wZXIgc2l6aW5nIChrZWVwIHRoaXMgZm9yIGltZyBlbGVtZW50cylcbiAgICAgICAgY29uc3QgaW1hZ2VTZWxlY3RvcnMgPSBbXG4gICAgICAgICAgICAnaW1nJyxcbiAgICAgICAgICAgICdsaSBpbWcnLCBcbiAgICAgICAgICAgICcuc2xpY2stc2xpZGUgaW1nJyxcbiAgICAgICAgICAgICcucHJvZHVjdFZpZXctdGh1bWJuYWlsIGltZycsXG4gICAgICAgICAgICAnLnByb2R1Y3RWaWV3LXRodW1ibmFpbC1saW5rIGltZydcbiAgICAgICAgXTtcbiAgICAgICAgXG4gICAgICAgIGltYWdlU2VsZWN0b3JzLmZvckVhY2goc2VsZWN0b3IgPT4ge1xuICAgICAgICAgICAgJHRodW1ibmFpbHMuZmluZChzZWxlY3RvcikuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHNldCBIVE1MIGF0dHJpYnV0ZXMsIG5vdCBpbmxpbmUgc3R5bGVzXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJzgwJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsICc4MCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0FwcGxpZWQgaW1tZWRpYXRlIGxheW91dCBmaXhlcyBmb3Igc3BsaXQgbGF5b3V0IC0gQ09NUExFVEUnKTtcbiAgICB9XG5cbiAgICBlbmZvcmNlVmVydGljYWxMYXlvdXQoKSB7XG4gICAgICAgIGNvbnN0ICRzcGxpdExheW91dCA9ICQoJy5wcm9kdWN0Vmlldy5zcGxpdC1sYXlvdXQnKTtcbiAgICAgICAgXG4gICAgICAgIGlmICgkc3BsaXRMYXlvdXQubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBjb25zdCAkdGh1bWJuYWlscyA9ICRzcGxpdExheW91dC5maW5kKCcucHJvZHVjdFZpZXctdGh1bWJuYWlscycpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCR0aHVtYm5haWxzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIEZPUkNFIEhJREUgQUxMIFNMSUNLIEFSUk9XU1xuICAgICAgICAkdGh1bWJuYWlscy5maW5kKCcuc2xpY2stcHJldiwgLnNsaWNrLW5leHQsIC5zbGljay1hcnJvdywgYnV0dG9uLnNsaWNrLXByZXYsIGJ1dHRvbi5zbGljay1uZXh0LCBidXR0b24uc2xpY2stYXJyb3cnKS5yZW1vdmUoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCBDU1MgY2xhc3NlcyBmb3IgY2Fyb3VzZWwgaW5pdGlhbGl6YXRpb25cbiAgICAgICAgJHRodW1ibmFpbHMuYWRkQ2xhc3MoJ2Nhcm91c2VsLWluaXRpYWxpemVkJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpc01vYmlsZSA9IHdpbmRvdy5pbm5lcldpZHRoIDw9IDc2ODtcbiAgICAgICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBFbmZvcmNpbmcgbGF5b3V0IGZvciBzcGxpdCBsYXlvdXQgLSBNb2JpbGU6ICR7aXNNb2JpbGV9YCk7XG4gICAgICAgIFxuICAgICAgICAvLyBBbGwgcHJvZHVjdHMgbm93IHVzZSBTbGljayBtb2RlIC0gYXBwbHkgbGF5b3V0IGJhc2VkIG9uIHNjcmVlbiBzaXplXG4gICAgICAgIGNvbnN0ICRzbGlja1RyYWNrID0gJHRodW1ibmFpbHMuZmluZCgnLnNsaWNrLXRyYWNrJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgcmVzcG9uc2l2ZSBzdGF0ZSBjbGFzc2VzIChDU1MgaGFuZGxlcyBhbGwgc3R5bGluZylcbiAgICAgICAgICAgIGlmIChpc01vYmlsZSkge1xuICAgICAgICAgICAgJHRodW1ibmFpbHMucmVtb3ZlQ2xhc3MoJ2Nhcm91c2VsLWRlc2t0b3AnKS5hZGRDbGFzcygnY2Fyb3VzZWwtbW9iaWxlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHRodW1ibmFpbHMucmVtb3ZlQ2xhc3MoJ2Nhcm91c2VsLW1vYmlsZScpLmFkZENsYXNzKCdjYXJvdXNlbC1kZXNrdG9wJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEFHR1JFU1NJVkVMWSByZW1vdmUgYW55IGlubGluZSB3aWR0aCBzdHlsZXMgdGhhdCBTbGljayBhcHBsaWVzXG4gICAgICAgIGNvbnN0IHJlbW92ZUlubGluZVdpZHRocyA9ICgpID0+IHtcbiAgICAgICAgICAgICRzbGlja1RyYWNrLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc3R5bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnd2lkdGgnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWluLXdpZHRoJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21heC13aWR0aCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkdGh1bWJuYWlscy5maW5kKCcuc2xpY2stc2xpZGUnKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0eWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3dpZHRoJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21pbi13aWR0aCcpOyBcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWF4LXdpZHRoJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgaW1tZWRpYXRlbHkgYW5kIHJlcGVhdGVkbHlcbiAgICAgICAgcmVtb3ZlSW5saW5lV2lkdGhzKCk7XG4gICAgICAgIHNldFRpbWVvdXQocmVtb3ZlSW5saW5lV2lkdGhzLCAxMDApO1xuICAgICAgICBzZXRUaW1lb3V0KHJlbW92ZUlubGluZVdpZHRocywgNTAwKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCB1cCBhIE11dGF0aW9uT2JzZXJ2ZXIgdG8gd2F0Y2ggZm9yIHN0eWxlIGNoYW5nZXNcbiAgICAgICAgaWYgKHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyICYmICRzbGlja1RyYWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHJlbW92ZUlubGluZVdpZHRocygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICRzbGlja1RyYWNrLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLCB7IFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLCBcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ3N0eWxlJ10gXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gTGlzdGVuIGZvciBzbGljayBldmVudHMgKGFsbCBwcm9kdWN0cyB1c2UgU2xpY2sgbm93KVxuICAgICAgICAvLyBJZiBzbGljayBpc24ndCBpbml0aWFsaXplZCB5ZXQsIGxpc3RlbiBmb3IgaXRcbiAgICAgICAgJHRodW1ibmFpbHMub24oJ2luaXQnLCAoZXZlbnQsIHNsaWNrKSA9PiB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnU2xpY2sgY2Fyb3VzZWwgaW5pdGlhbGl6ZWQsIGVuZm9yY2luZyBsYXlvdXQnKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5mb3JjZVZlcnRpY2FsTGF5b3V0KCk7XG4gICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gQWxzbyBsaXN0ZW4gZm9yIHJlSW5pdFxuICAgICAgICAkdGh1bWJuYWlscy5vbigncmVJbml0JywgKGV2ZW50LCBzbGljaykgPT4ge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1NsaWNrIGNhcm91c2VsIHJlaW5pdGlhbGl6ZWQsIGVuZm9yY2luZyBsYXlvdXQnKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5mb3JjZVZlcnRpY2FsTGF5b3V0KCk7XG4gICAgICAgICAgICB9LCA1MCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gTGlzdGVuIGZvciBicmVha3BvaW50IGNoYW5nZXNcbiAgICAgICAgJHRodW1ibmFpbHMub24oJ2JyZWFrcG9pbnQnLCAoZXZlbnQsIHNsaWNrKSA9PiB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnU2xpY2sgY2Fyb3VzZWwgYnJlYWtwb2ludCBjaGFuZ2VkLCBlbmZvcmNpbmcgbGF5b3V0Jyk7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmVuZm9yY2VWZXJ0aWNhbExheW91dCgpO1xuICAgICAgICAgICAgfSwgNTApO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBjbGljayBoYW5kbGVycyBmb3IgY3VzdG9tIG5hdmlnYXRpb24gYXJyb3dzXG4gICAgICAgIHRoaXMuc2V0dXBOYXZpZ2F0aW9uSGFuZGxlcnMoJHNwbGl0TGF5b3V0KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBtb2JpbGUtc3BlY2lmaWMgaGFuZGxlcnNcbiAgICAgICAgdGhpcy5zZXR1cE1vYmlsZUhhbmRsZXJzKCRzcGxpdExheW91dCk7XG4gICAgICAgIFxuICAgICAgICAvLyBPdmVycmlkZSB0aHVtYm5haWwgY2xpY2sgYmVoYXZpb3IgZm9yIHNwbGl0IGxheW91dFxuICAgICAgICB0aGlzLnNldHVwVGh1bWJuYWlsQ2xpY2tIYW5kbGVycygkc3BsaXRMYXlvdXQpO1xuICAgICAgICBcbiAgICAgICAgLy8gRGlzYWJsZSBob3ZlciBiZWhhdmlvciBmb3Igc3BsaXQgbGF5b3V0IHRodW1ibmFpbHNcbiAgICAgICAgdGhpcy5kaXNhYmxlVGh1bWJuYWlsSG92ZXIoJHNwbGl0TGF5b3V0KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCB1cCBtYWluIGltYWdlIHN3aXBlIGZvciBtb2JpbGVcbiAgICAgICAgdGhpcy5zZXR1cE1haW5JbWFnZVN3aXBlKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgaGFuZGxlcnMgb24gd2luZG93IHJlc2l6ZVxuICAgICAgICAkKHdpbmRvdykub24oJ3Jlc2l6ZScsICgpID0+IHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBNb2JpbGVIYW5kbGVycygkc3BsaXRMYXlvdXQpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBNYWluSW1hZ2VTd2lwZSgpOyAvLyBSZS1zZXR1cCBzd2lwZSBvbiByZXNpemVcbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBzZXR1cE5hdmlnYXRpb25IYW5kbGVycygkc3BsaXRMYXlvdXQpIHtcbiAgICAgICAgY29uc3QgJHRodW1ibmFpbHMgPSAkc3BsaXRMYXlvdXQuZmluZCgnLnByb2R1Y3RWaWV3LXRodW1ibmFpbHMnKTtcbiAgICAgICAgXG5cbiAgICAgICAgXG4gICAgICAgIC8vIFVzZSBkb2N1bWVudC1sZXZlbCBkZWxlZ2F0aW9uIHRvIGNhcHR1cmUgY2xpY2tzIG9uIHRoZSB0aHVtYm5haWwgY29udGFpbmVyXG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2suc3BsaXQtbGF5b3V0LXBzZXVkbycpO1xuICAgICAgICBcbiAgICAgICAgLy8gSGFuZGxlIGNsaWNrcyBvbiB0aGUgdGh1bWJuYWlscyBjb250YWluZXIgdG8gZGV0ZWN0IHBzZXVkby1lbGVtZW50IGFyZWFzXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljay5zcGxpdC1sYXlvdXQtcHNldWRvJywgJy5wcm9kdWN0Vmlldy5zcGxpdC1sYXlvdXQgLnByb2R1Y3RWaWV3LXRodW1ibmFpbHMnLCAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCAkY29udGFpbmVyID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyUmVjdCA9ICRjb250YWluZXJbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBjb25zdCBjbGlja1kgPSBlLmNsaWVudFk7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXJUb3AgPSBjb250YWluZXJSZWN0LnRvcDtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lckJvdHRvbSA9IGNvbnRhaW5lclJlY3QuYm90dG9tO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEZWZpbmUgYXJyb3cgYXJlYXMgLSB0b3AgNDBweCBhbmQgYm90dG9tIDQwcHggb2YgY29udGFpbmVyXG4gICAgICAgICAgICBjb25zdCBhcnJvd0hlaWdodCA9IDQwO1xuICAgICAgICAgICAgY29uc3QgdXBBcnJvd0JvdHRvbSA9IGNvbnRhaW5lclRvcCArIGFycm93SGVpZ2h0O1xuICAgICAgICAgICAgY29uc3QgZG93bkFycm93VG9wID0gY29udGFpbmVyQm90dG9tIC0gYXJyb3dIZWlnaHQ7XG4gICAgICAgICAgICBcblxuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCAkY3VycmVudFNwbGl0TGF5b3V0ID0gJGNvbnRhaW5lci5jbG9zZXN0KCcucHJvZHVjdFZpZXcuc3BsaXQtbGF5b3V0Jyk7XG4gICAgICAgICAgICBjb25zdCAkc2xpY2tMaXN0ID0gJGNvbnRhaW5lci5maW5kKCcuc2xpY2stbGlzdCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJHNsaWNrTGlzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGNsaWNrIGlzIGluIHRoZSB1cCBhcnJvdyBhcmVhICg6OmJlZm9yZSlcbiAgICAgICAgICAgIGlmIChjbGlja1kgPj0gY29udGFpbmVyVG9wICYmIGNsaWNrWSA8PSB1cEFycm93Qm90dG9tKSB7XG4gICAgICAgICAgICAgICAgLy8gVXNlIFNsaWNrJ3MgYnVpbHQtaW4gbmF2aWdhdGlvbiBpbnN0ZWFkIG9mIG1hbnVhbCBzY3JvbGxpbmdcbiAgICAgICAgICAgICAgICBpZiAoJGNvbnRhaW5lci5oYXNDbGFzcygnc2xpY2staW5pdGlhbGl6ZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAkY29udGFpbmVyLnNsaWNrKCdzbGlja1ByZXYnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxBcnJvd1Zpc2liaWxpdHkoJGN1cnJlbnRTcGxpdExheW91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgY2xpY2sgaXMgaW4gdGhlIGRvd24gYXJyb3cgYXJlYSAoOjphZnRlcilcbiAgICAgICAgICAgIGVsc2UgaWYgKGNsaWNrWSA+PSBkb3duQXJyb3dUb3AgJiYgY2xpY2tZIDw9IGNvbnRhaW5lckJvdHRvbSkge1xuICAgICAgICAgICAgICAgIC8vIFVzZSBTbGljaydzIGJ1aWx0LWluIG5hdmlnYXRpb24gaW5zdGVhZCBvZiBtYW51YWwgc2Nyb2xsaW5nXG4gICAgICAgICAgICAgICAgaWYgKCRjb250YWluZXIuaGFzQ2xhc3MoJ3NsaWNrLWluaXRpYWxpemVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvbnRhaW5lci5zbGljaygnc2xpY2tOZXh0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2Nyb2xsQXJyb3dWaXNpYmlsaXR5KCRjdXJyZW50U3BsaXRMYXlvdXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgYXJyb3cgdmlzaWJpbGl0eSB3aGVuIFNsaWNrIGlzIGluaXRpYWxpemVkIGFuZCBvbiBzbGlkZSBjaGFuZ2VzXG4gICAgICAgICR0aHVtYm5haWxzLm9uKCdpbml0IGFmdGVyQ2hhbmdlJywgKGV2ZW50LCBzbGljaykgPT4ge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTY3JvbGxBcnJvd1Zpc2liaWxpdHkoJHNwbGl0TGF5b3V0KTtcbiAgICAgICAgICAgIH0sIDUwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBTFRFUk5BVElWRTogQWRkIGRpcmVjdCBjbGljayBoYW5kbGVycyB0byB0aGUgYXJyb3cgYXJlYXNcbiAgICAgICAgLy8gVGhpcyBpcyBhIGJhY2t1cCBtZXRob2QgaW4gY2FzZSB0aGUgcHNldWRvLWVsZW1lbnQgZGV0ZWN0aW9uIGRvZXNuJ3Qgd29ya1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgJHRodW1ibmFpbHMuZWFjaChmdW5jdGlvbihpbmRleCkge1xuICAgICAgICAgICAgICAgIGNvbnN0ICR0aHVtYiA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGludmlzaWJsZSBvdmVybGF5IGRpdnMgZm9yIHRoZSBhcnJvdyBhcmVhc1xuICAgICAgICAgICAgICAgIGlmICgkdGh1bWIuZmluZCgnLmFycm93LW92ZXJsYXktdXAsIC5hcnJvdy1vdmVybGF5LWRvd24nKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgJHVwT3ZlcmxheSA9ICQoJzxkaXYgY2xhc3M9XCJhcnJvdy1vdmVybGF5LXVwXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHRvcDogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IGhlaWdodDogNDBweDsgei1pbmRleDogMjU7IGN1cnNvcjogcG9pbnRlcjsgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IHBvaW50ZXItZXZlbnRzOiBhdXRvO1wiPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCAkZG93bk92ZXJsYXkgPSAkKCc8ZGl2IGNsYXNzPVwiYXJyb3ctb3ZlcmxheS1kb3duXCIgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IGJvdHRvbTogMDsgbGVmdDogMDsgcmlnaHQ6IDA7IGhlaWdodDogNDBweDsgei1pbmRleDogMjU7IGN1cnNvcjogcG9pbnRlcjsgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7IHBvaW50ZXItZXZlbnRzOiBhdXRvO1wiPjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgJHRodW1iLmNzcygncG9zaXRpb24nLCAncmVsYXRpdmUnKS5hcHBlbmQoJHVwT3ZlcmxheSwgJGRvd25PdmVybGF5KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICR1cE92ZXJsYXkub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgaGFuZGxlIGNsaWNrcyB0aGF0IGFyZSBOT1Qgb24gdGh1bWJuYWlsIGltYWdlcyBvciB0aGVpciBjb250YWluZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCAkdGFyZ2V0ID0gJChlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGFyZ2V0LmlzKCdpbWcnKSB8fCAkdGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLWltYWdlLWdhbGxlcnktaXRlbV0nKS5sZW5ndGggPiAwIHx8ICR0YXJnZXQuaGFzQ2xhc3MoJ3Byb2R1Y3RWaWV3LXRodW1ibmFpbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGV0IHRodW1ibmFpbCBjbGlja3MgcGFzcyB0aHJvdWdoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEaXJlY3Qgc2Nyb2xsaW5nIGFwcHJvYWNoIC0gYnlwYXNzIFNsaWNrIGNvbXBsZXRlbHlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0ICRzbGlja0xpc3QgPSAkdGh1bWIuZmluZCgnLnNsaWNrLWxpc3QnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzbGlja0xpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTY3JvbGxUb3AgPSAkc2xpY2tMaXN0LnNjcm9sbFRvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjcm9sbEFtb3VudCA9IDg4OyAvLyB0aHVtYm5haWwgaGVpZ2h0ICg4MHB4KSArIGdhcCAoOHB4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Njcm9sbFRvcCA9IE1hdGgubWF4KDAsIGN1cnJlbnRTY3JvbGxUb3AgLSBzY3JvbGxBbW91bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzbGlja0xpc3QuYW5pbWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogbmV3U2Nyb2xsVG9wXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAkZG93bk92ZXJsYXkub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9ubHkgaGFuZGxlIGNsaWNrcyB0aGF0IGFyZSBOT1Qgb24gdGh1bWJuYWlsIGltYWdlcyBvciB0aGVpciBjb250YWluZXJzXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCAkdGFyZ2V0ID0gJChlLnRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkdGFyZ2V0LmlzKCdpbWcnKSB8fCAkdGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLWltYWdlLWdhbGxlcnktaXRlbV0nKS5sZW5ndGggPiAwIHx8ICR0YXJnZXQuaGFzQ2xhc3MoJ3Byb2R1Y3RWaWV3LXRodW1ibmFpbCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGV0IHRodW1ibmFpbCBjbGlja3MgcGFzcyB0aHJvdWdoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEaXJlY3Qgc2Nyb2xsaW5nIGFwcHJvYWNoIC0gYnlwYXNzIFNsaWNrIGNvbXBsZXRlbHlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0ICRzbGlja0xpc3QgPSAkdGh1bWIuZmluZCgnLnNsaWNrLWxpc3QnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRzbGlja0xpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTY3JvbGxUb3AgPSAkc2xpY2tMaXN0LnNjcm9sbFRvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNjcm9sbEFtb3VudCA9IDg4OyAvLyB0aHVtYm5haWwgaGVpZ2h0ICg4MHB4KSArIGdhcCAoOHB4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heFNjcm9sbFRvcCA9ICRzbGlja0xpc3RbMF0uc2Nyb2xsSGVpZ2h0IC0gJHNsaWNrTGlzdC5vdXRlckhlaWdodCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Njcm9sbFRvcCA9IE1hdGgubWluKG1heFNjcm9sbFRvcCwgY3VycmVudFNjcm9sbFRvcCArIHNjcm9sbEFtb3VudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNsaWNrTGlzdC5hbmltYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBuZXdTY3JvbGxUb3BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNldHRpbmcgdXAgb3ZlcmxheSBoYW5kbGVyczonLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgdXBkYXRlU2Nyb2xsQXJyb3dWaXNpYmlsaXR5KCRzcGxpdExheW91dCkge1xuICAgICAgICBjb25zdCAkdGh1bWJuYWlscyA9ICRzcGxpdExheW91dC5maW5kKCcucHJvZHVjdFZpZXctdGh1bWJuYWlscycpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCEkdGh1bWJuYWlscy5oYXNDbGFzcygnc2xpY2staW5pdGlhbGl6ZWQnKSkge1xuICAgICAgICAgICAgLy8gU2xpY2sgbm90IGluaXRpYWxpemVkIHlldFxuICAgICAgICAgICAgJHRodW1ibmFpbHMucmVtb3ZlQ2xhc3MoJ2Nhbi1zY3JvbGwtdXAgY2FuLXNjcm9sbC1kb3duJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIEdldCBTbGljayBpbnN0YW5jZSBkYXRhXG4gICAgICAgIGNvbnN0IHNsaWNrRGF0YSA9ICR0aHVtYm5haWxzLnNsaWNrKCdnZXRTbGljaycpO1xuICAgICAgICBpZiAoIXNsaWNrRGF0YSkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY3VycmVudFNsaWRlID0gc2xpY2tEYXRhLmN1cnJlbnRTbGlkZTtcbiAgICAgICAgY29uc3Qgc2xpZGVDb3VudCA9IHNsaWNrRGF0YS5zbGlkZUNvdW50O1xuICAgICAgICBjb25zdCBzbGlkZXNUb1Nob3cgPSBzbGlja0RhdGEub3B0aW9ucy5zbGlkZXNUb1Nob3c7XG4gICAgICAgIFxuXG4gICAgICAgIFxuICAgICAgICBpZiAoc2xpZGVDb3VudCA8PSBzbGlkZXNUb1Nob3cpIHtcbiAgICAgICAgICAgIC8vIEFsbCBzbGlkZXMgYXJlIHZpc2libGUgLSBoaWRlIGJvdGggYXJyb3dzXG4gICAgICAgICAgICAkdGh1bWJuYWlscy5yZW1vdmVDbGFzcygnY2FuLXNjcm9sbC11cCBjYW4tc2Nyb2xsLWRvd24nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2hvdy9oaWRlIHVwIGFycm93ICg6OmJlZm9yZSkgYmFzZWQgb24gY3VycmVudCBzbGlkZVxuICAgICAgICBpZiAoY3VycmVudFNsaWRlIDw9IDApIHtcbiAgICAgICAgICAgIC8vIEF0IG9yIG5lYXIgdGhlIGZpcnN0IHNsaWRlIC0gaGlkZSB1cCBhcnJvd1xuICAgICAgICAgICAgJHRodW1ibmFpbHMucmVtb3ZlQ2xhc3MoJ2Nhbi1zY3JvbGwtdXAnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIE5vdCBhdCBmaXJzdCBzbGlkZSAtIHNob3cgdXAgYXJyb3dcbiAgICAgICAgICAgICR0aHVtYm5haWxzLmFkZENsYXNzKCdjYW4tc2Nyb2xsLXVwJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNob3cvaGlkZSBkb3duIGFycm93ICg6OmFmdGVyKSBiYXNlZCBvbiBjdXJyZW50IHNsaWRlXG4gICAgICAgIGlmIChjdXJyZW50U2xpZGUgPj0gc2xpZGVDb3VudCAtIHNsaWRlc1RvU2hvdykge1xuICAgICAgICAgICAgLy8gQXQgb3IgbmVhciB0aGUgbGFzdCBzbGlkZSAtIGhpZGUgZG93biBhcnJvd1xuICAgICAgICAgICAgJHRodW1ibmFpbHMucmVtb3ZlQ2xhc3MoJ2Nhbi1zY3JvbGwtZG93bicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gTm90IGF0IGxhc3Qgc2xpZGUgLSBzaG93IGRvd24gYXJyb3dcbiAgICAgICAgICAgICR0aHVtYm5haWxzLmFkZENsYXNzKCdjYW4tc2Nyb2xsLWRvd24nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBzZXR1cE1vYmlsZUhhbmRsZXJzKCRzcGxpdExheW91dCkge1xuICAgICAgICAvLyBPbmx5IHNldCB1cCBtb2JpbGUgaGFuZGxlcnMgb24gbW9iaWxlIGRldmljZXNcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gNzY4KSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBjb25zdCAkdGh1bWJuYWlscyA9ICRzcGxpdExheW91dC5maW5kKCcucHJvZHVjdFZpZXctdGh1bWJuYWlscycpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnU2V0dGluZyB1cCBtb2JpbGUgaG9yaXpvbnRhbCBzY3JvbGwgaGFuZGxlcnMnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEhhbmRsZSBob3Jpem9udGFsIHNjcm9sbCBmb3IgbW9iaWxlXG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2subW9iaWxlLWhvcml6b250YWwnKTtcbiAgICAgICAgXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljay5tb2JpbGUtaG9yaXpvbnRhbCcsICcucHJvZHVjdFZpZXcuc3BsaXQtbGF5b3V0IC5wcm9kdWN0Vmlldy10aHVtYm5haWxzJywgKGUpID0+IHtcbiAgICAgICAgICAgIC8vIE9ubHkgb24gbW9iaWxlXG4gICAgICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPiA3NjgpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCAkY29udGFpbmVyID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICAgICAgY29uc3QgY29udGFpbmVyUmVjdCA9ICRjb250YWluZXJbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgICAgICBjb25zdCBjbGlja1ggPSBlLmNsaWVudFggLSBjb250YWluZXJSZWN0LmxlZnQ7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXJXaWR0aCA9IGNvbnRhaW5lclJlY3Qud2lkdGg7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIERlZmluZSBjbGljayB6b25lcyBmb3IgaG9yaXpvbnRhbCBzY3JvbGxpbmdcbiAgICAgICAgICAgIGNvbnN0IGFycm93V2lkdGggPSA0MDsgLy8gV2lkdGggb2YgdGhlIGhvcml6b250YWwgYXJyb3dzXG4gICAgICAgICAgICBjb25zdCBsZWZ0QXJyb3dab25lID0gYXJyb3dXaWR0aDtcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0QXJyb3dab25lID0gY29udGFpbmVyV2lkdGggLSBhcnJvd1dpZHRoO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnTW9iaWxlIGhvcml6b250YWwgY2xpY2sgZGV0ZWN0ZWQ6Jywge1xuICAgICAgICAgICAgLy8gICAgIGNsaWNrWCxcbiAgICAgICAgICAgIC8vICAgICBjb250YWluZXJXaWR0aCxcbiAgICAgICAgICAgIC8vICAgICBsZWZ0QXJyb3dab25lLFxuICAgICAgICAgICAgLy8gICAgIHJpZ2h0QXJyb3dab25lXG4gICAgICAgICAgICAvLyB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgJHNsaWNrTGlzdCA9ICRjb250YWluZXIuZmluZCgnLnNsaWNrLWxpc3QnKTtcbiAgICAgICAgICAgIGlmICgkc2xpY2tMaXN0Lmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoY2xpY2tYIDw9IGxlZnRBcnJvd1pvbmUpIHtcbiAgICAgICAgICAgICAgICAvLyBDbGlja2VkIGluIGxlZnQgYXJyb3cgYXJlYSAtIHNjcm9sbCBsZWZ0XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ01vYmlsZSBsZWZ0IGFycm93IGFyZWEgY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTY3JvbGxMZWZ0ID0gJHNsaWNrTGlzdC5zY3JvbGxMZWZ0KCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2Nyb2xsQW1vdW50ID0gOTI7IC8vIHRodW1ibmFpbCB3aWR0aCAoODBweCkgKyBnYXAgKDEycHgpXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3U2Nyb2xsTGVmdCA9IE1hdGgubWF4KDAsIGN1cnJlbnRTY3JvbGxMZWZ0IC0gc2Nyb2xsQW1vdW50KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAkc2xpY2tMaXN0LmFuaW1hdGUoeyBzY3JvbGxMZWZ0OiBuZXdTY3JvbGxMZWZ0IH0sIDMwMCwgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1vYmlsZUFycm93VmlzaWJpbGl0eSgkc3BsaXRMYXlvdXQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgfSBlbHNlIGlmIChjbGlja1ggPj0gcmlnaHRBcnJvd1pvbmUpIHtcbiAgICAgICAgICAgICAgICAvLyBDbGlja2VkIGluIHJpZ2h0IGFycm93IGFyZWEgLSBzY3JvbGwgcmlnaHRcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnTW9iaWxlIHJpZ2h0IGFycm93IGFyZWEgY2xpY2tlZCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRTY3JvbGxMZWZ0ID0gJHNsaWNrTGlzdC5zY3JvbGxMZWZ0KCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2Nyb2xsQW1vdW50ID0gOTI7IC8vIHRodW1ibmFpbCB3aWR0aCAoODBweCkgKyBnYXAgKDEycHgpXG4gICAgICAgICAgICAgICAgY29uc3QgbWF4U2Nyb2xsTGVmdCA9ICRzbGlja0xpc3RbMF0uc2Nyb2xsV2lkdGggLSAkc2xpY2tMaXN0Lm91dGVyV2lkdGgoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdTY3JvbGxMZWZ0ID0gTWF0aC5taW4obWF4U2Nyb2xsTGVmdCwgY3VycmVudFNjcm9sbExlZnQgKyBzY3JvbGxBbW91bnQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICRzbGlja0xpc3QuYW5pbWF0ZSh7IHNjcm9sbExlZnQ6IG5ld1Njcm9sbExlZnQgfSwgMzAwLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTW9iaWxlQXJyb3dWaXNpYmlsaXR5KCRzcGxpdExheW91dCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0IHVwIG1vYmlsZSBhcnJvdyB2aXNpYmlsaXR5XG4gICAgICAgICR0aHVtYm5haWxzLm9uKCdpbml0JywgKGV2ZW50LCBzbGljaykgPT4ge1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDc2OCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU1vYmlsZUFycm93VmlzaWJpbGl0eSgkc3BsaXRMYXlvdXQpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgJHNsaWNrTGlzdCA9ICRzcGxpdExheW91dC5maW5kKCcuc2xpY2stbGlzdCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoJHNsaWNrTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2xpY2tMaXN0Lm9uKCdzY3JvbGwnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNb2JpbGVBcnJvd1Zpc2liaWxpdHkoJHNwbGl0TGF5b3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHVwZGF0ZU1vYmlsZUFycm93VmlzaWJpbGl0eSgkc3BsaXRMYXlvdXQpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gNzY4KSByZXR1cm47IC8vIE9ubHkgZm9yIG1vYmlsZVxuICAgICAgICBcbiAgICAgICAgY29uc3QgJHRodW1ibmFpbHMgPSAkc3BsaXRMYXlvdXQuZmluZCgnLnByb2R1Y3RWaWV3LXRodW1ibmFpbHMnKTtcbiAgICAgICAgY29uc3QgJHNsaWNrTGlzdCA9ICRzcGxpdExheW91dC5maW5kKCcuc2xpY2stbGlzdCcpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCRzbGlja0xpc3QubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzY3JvbGxMZWZ0ID0gJHNsaWNrTGlzdC5zY3JvbGxMZWZ0KCk7XG4gICAgICAgIGNvbnN0IHNjcm9sbFdpZHRoID0gJHNsaWNrTGlzdFswXS5zY3JvbGxXaWR0aDtcbiAgICAgICAgY29uc3QgY2xpZW50V2lkdGggPSAkc2xpY2tMaXN0Lm91dGVyV2lkdGgoKTtcbiAgICAgICAgY29uc3QgbWF4U2Nyb2xsTGVmdCA9IHNjcm9sbFdpZHRoIC0gY2xpZW50V2lkdGg7XG4gICAgICAgIGNvbnN0IGlzU2Nyb2xsYWJsZSA9IHNjcm9sbFdpZHRoID4gY2xpZW50V2lkdGg7XG4gICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygnVXBkYXRpbmcgbW9iaWxlIGhvcml6b250YWwgYXJyb3cgdmlzaWJpbGl0eTonLCB7XG4gICAgICAgIC8vICAgICBzY3JvbGxMZWZ0LFxuICAgICAgICAvLyAgICAgc2Nyb2xsV2lkdGgsXG4gICAgICAgIC8vICAgICBjbGllbnRXaWR0aCxcbiAgICAgICAgLy8gICAgIG1heFNjcm9sbExlZnQsXG4gICAgICAgIC8vICAgICBpc1Njcm9sbGFibGVcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWlzU2Nyb2xsYWJsZSkge1xuICAgICAgICAgICAgJHRodW1ibmFpbHMucmVtb3ZlQ2xhc3MoJ2Nhbi1zY3JvbGwtbGVmdCBjYW4tc2Nyb2xsLXJpZ2h0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFNob3cvaGlkZSBsZWZ0IGFycm93XG4gICAgICAgIGlmIChzY3JvbGxMZWZ0IDw9IDUpIHtcbiAgICAgICAgICAgICR0aHVtYm5haWxzLnJlbW92ZUNsYXNzKCdjYW4tc2Nyb2xsLWxlZnQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICR0aHVtYm5haWxzLmFkZENsYXNzKCdjYW4tc2Nyb2xsLWxlZnQnKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gU2hvdy9oaWRlIHJpZ2h0IGFycm93XG4gICAgICAgIGlmIChzY3JvbGxMZWZ0ID49IG1heFNjcm9sbExlZnQgLSA1KSB7XG4gICAgICAgICAgICAkdGh1bWJuYWlscy5yZW1vdmVDbGFzcygnY2FuLXNjcm9sbC1yaWdodCcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHRodW1ibmFpbHMuYWRkQ2xhc3MoJ2Nhbi1zY3JvbGwtcmlnaHQnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBzZXR1cFRodW1ibmFpbENsaWNrSGFuZGxlcnMoJHNwbGl0TGF5b3V0KSB7XG4gICAgICAgIC8vIFJlbW92ZSBleGlzdGluZyB0aHVtYm5haWwgY2xpY2sgaGFuZGxlcnMgdGhhdCBvcGVuIFBob3RvU3dpcGVcbiAgICAgICAgY29uc3QgJHRodW1ibmFpbHMgPSAkc3BsaXRMYXlvdXQuZmluZCgnLnByb2R1Y3RWaWV3LXRodW1ibmFpbHMnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFVuYmluZCBleGlzdGluZyBjbGljayBBTkQgaG92ZXIgaGFuZGxlcnMgZnJvbSBpbWFnZSBnYWxsZXJ5XG4gICAgICAgICR0aHVtYm5haWxzLmZpbmQoJ1tkYXRhLWltYWdlLWdhbGxlcnktaXRlbV0sIFtkYXRhLWltYWdlLWdhbGxlcnktdmlkZW9dJykub2ZmKCdjbGljayBtb3VzZWVudGVyJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgb3VyIGN1c3RvbSBjbGljayBoYW5kbGVyIGZvciB0aHVtYm5haWxzXG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignY2xpY2suc3BsaXQtbGF5b3V0LXRodW1ibmFpbHMnKTtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrLnNwbGl0LWxheW91dC10aHVtYm5haWxzJywgJy5wcm9kdWN0Vmlldy5zcGxpdC1sYXlvdXQgLnByb2R1Y3RWaWV3LXRodW1ibmFpbHMgW2RhdGEtaW1hZ2UtZ2FsbGVyeS1pdGVtXSwgLnByb2R1Y3RWaWV3LnNwbGl0LWxheW91dCAucHJvZHVjdFZpZXctdGh1bWJuYWlscyBbZGF0YS1pbWFnZS1nYWxsZXJ5LXZpZGVvXScsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCAkdGFyZ2V0ID0gJChlLmN1cnJlbnRUYXJnZXQpO1xuICAgICAgICAgICAgY29uc3QgdHlwZSA9ICR0YXJnZXQuYXR0cignZGF0YS10eXBlJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRyeSB0byBmaW5kIHRoZSBpbWFnZSBnYWxsZXJ5IGluc3RhbmNlIGZyb20gdGhlIGdsb2JhbCBwcm9kdWN0IGRldGFpbHNcbiAgICAgICAgICAgIGxldCBpbWFnZUdhbGxlcnkgPSBudWxsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSdzIGEgZ2xvYmFsIHByb2R1Y3QgZGV0YWlscyBpbnN0YW5jZVxuICAgICAgICAgICAgaWYgKHdpbmRvdy5wcm9kdWN0RGV0YWlscyAmJiB3aW5kb3cucHJvZHVjdERldGFpbHMuaW1hZ2VHYWxsZXJ5KSB7XG4gICAgICAgICAgICAgICAgaW1hZ2VHYWxsZXJ5ID0gd2luZG93LnByb2R1Y3REZXRhaWxzLmltYWdlR2FsbGVyeTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQWx0ZXJuYXRpdmU6IGNoZWNrIGlmIGl0J3Mgc3RvcmVkIG9uIHRoZSBwcm9kdWN0VmlldyBlbGVtZW50XG4gICAgICAgICAgICBpZiAoIWltYWdlR2FsbGVyeSkge1xuICAgICAgICAgICAgICAgIGNvbnN0ICRwcm9kdWN0VmlldyA9ICR0YXJnZXQuY2xvc2VzdCgnLnByb2R1Y3RWaWV3Jyk7XG4gICAgICAgICAgICAgICAgaW1hZ2VHYWxsZXJ5ID0gJHByb2R1Y3RWaWV3LmRhdGEoJ2ltYWdlR2FsbGVyeScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaW1hZ2VHYWxsZXJ5ICYmIHR5cGVvZiBpbWFnZUdhbGxlcnkuc2VsZWN0TmV3SW1hZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIGV4aXN0aW5nIHNlbGVjdE5ld0ltYWdlIG1ldGhvZCB0byBjaGFuZ2UgdGhlIG1haW4gaW1hZ2VcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBpbWFnZUdhbGxlcnkuc2VsZWN0TmV3SW1hZ2UoZSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gbWFudWFsIG1ldGhvZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZU1haW5JbWFnZU1hbnVhbGx5KCR0YXJnZXQsIHR5cGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRmFsbGJhY2s6IG1hbnVhbGx5IGNoYW5nZSB0aGUgbWFpbiBpbWFnZVxuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFpbkltYWdlTWFudWFsbHkoJHRhcmdldCwgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBkaXNhYmxlVGh1bWJuYWlsSG92ZXIoJHNwbGl0TGF5b3V0KSB7XG4gICAgICAgIC8vIENvbnRpbnVvdXNseSBkaXNhYmxlIGhvdmVyIGZ1bmN0aW9uYWxpdHkgZm9yIHNwbGl0IGxheW91dCB0aHVtYm5haWxzXG4gICAgICAgIGNvbnN0ICR0aHVtYm5haWxzID0gJHNwbGl0TGF5b3V0LmZpbmQoJy5wcm9kdWN0Vmlldy10aHVtYm5haWxzJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygnRGlzYWJsaW5nIHRodW1ibmFpbCBob3ZlciBmb3Igc3BsaXQgbGF5b3V0Jyk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgYW55IGhvdmVyIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICAkdGh1bWJuYWlscy5maW5kKCdbZGF0YS1pbWFnZS1nYWxsZXJ5LWl0ZW1dLCBbZGF0YS1pbWFnZS1nYWxsZXJ5LXZpZGVvXScpLm9mZignbW91c2VlbnRlciBtb3VzZW92ZXIgaG92ZXInKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBhIG5vLW9wIGhvdmVyIGhhbmRsZXIgdG8gcHJldmVudCBmdXR1cmUgaG92ZXIgZXZlbnRzXG4gICAgICAgICQoZG9jdW1lbnQpLm9mZignbW91c2VlbnRlci5zcGxpdC1sYXlvdXQtbm8taG92ZXInKTtcbiAgICAgICAgJChkb2N1bWVudCkub24oJ21vdXNlZW50ZXIuc3BsaXQtbGF5b3V0LW5vLWhvdmVyJywgJy5wcm9kdWN0Vmlldy5zcGxpdC1sYXlvdXQgLnByb2R1Y3RWaWV3LXRodW1ibmFpbHMgW2RhdGEtaW1hZ2UtZ2FsbGVyeS1pdGVtXSwgLnByb2R1Y3RWaWV3LnNwbGl0LWxheW91dCAucHJvZHVjdFZpZXctdGh1bWJuYWlscyBbZGF0YS1pbWFnZS1nYWxsZXJ5LXZpZGVvXScsIChlKSA9PiB7XG4gICAgICAgICAgICAvLyBQcmV2ZW50IGhvdmVyIGZyb20gY2hhbmdpbmcgbWFpbiBpbWFnZVxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygnVGh1bWJuYWlsIGhvdmVyIGRpc2FibGVkIGZvciBzcGxpdCBsYXlvdXQnKTtcbiAgICB9XG4gICAgXG4gICAgY2hhbmdlTWFpbkltYWdlTWFudWFsbHkoJHRhcmdldCwgdHlwZSkge1xuICAgICAgICAvLyBNYW51YWwgbWV0aG9kIHRvIGNoYW5nZSBtYWluIGltYWdlIGlmIGltYWdlIGdhbGxlcnkgaW5zdGFuY2UgaXMgbm90IGF2YWlsYWJsZVxuICAgICAgICBjb25zdCAkbWFpbkltYWdlID0gJCgnLnByb2R1Y3RWaWV3LWltYWdlIFtkYXRhLW1haW4taW1hZ2VdJyk7XG4gICAgICAgIGNvbnN0ICRtYWluSW1hZ2VDb250YWluZXIgPSAkKCcucHJvZHVjdFZpZXctaW1hZ2UgLnByb2R1Y3RWaWV3LWltZy1jb250YWluZXIgYScpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCRtYWluSW1hZ2UubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICAvLyBHZXQgdGhlIG5ldyBpbWFnZSBkYXRhIGZyb20gdGhlIHRodW1ibmFpbFxuICAgICAgICBjb25zdCBuZXdJbWFnZVVybCA9ICR0YXJnZXQuYXR0cihgZGF0YS0ke3R5cGV9LWdhbGxlcnktbmV3LWltYWdlLXVybGApO1xuICAgICAgICBjb25zdCBuZXdJbWFnZVNyY3NldCA9ICR0YXJnZXQuYXR0cihgZGF0YS0ke3R5cGV9LWdhbGxlcnktbmV3LWltYWdlLXNyY3NldGApO1xuICAgICAgICBjb25zdCB6b29tSW1hZ2VVcmwgPSAkdGFyZ2V0LmF0dHIoYGRhdGEtJHt0eXBlfS1nYWxsZXJ5LXpvb20taW1hZ2UtdXJsYCk7XG4gICAgICAgIGNvbnN0IGltYWdlQWx0ID0gJHRhcmdldC5maW5kKCdpbWcnKS5hdHRyKCdhbHQnKTtcbiAgICAgICAgY29uc3QgaW1hZ2VJbmRleCA9ICR0YXJnZXQuYXR0cignZGF0YS1pbmRleCcpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFuZXdJbWFnZVVybCkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBtYWluIGltYWdlXG4gICAgICAgICRtYWluSW1hZ2UuYXR0cih7XG4gICAgICAgICAgICBzcmM6IG5ld0ltYWdlVXJsLFxuICAgICAgICAgICAgc3Jjc2V0OiBuZXdJbWFnZVNyY3NldCB8fCAnJyxcbiAgICAgICAgICAgIGFsdDogaW1hZ2VBbHQgfHwgJycsXG4gICAgICAgICAgICB0aXRsZTogaW1hZ2VBbHQgfHwgJydcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgdGhlIG1haW4gaW1hZ2UgY29udGFpbmVyIGxpbmsgZm9yIFBob3RvU3dpcGVcbiAgICAgICAgaWYgKCRtYWluSW1hZ2VDb250YWluZXIubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgJG1haW5JbWFnZUNvbnRhaW5lci5hdHRyKHtcbiAgICAgICAgICAgICAgICAnZGF0YS1pbmRleCc6IGltYWdlSW5kZXgsXG4gICAgICAgICAgICAgICAgJ2RhdGEtdHlwZSc6IHR5cGUsXG4gICAgICAgICAgICAgICAgJ2hyZWYnOiB6b29tSW1hZ2VVcmwgfHwgbmV3SW1hZ2VVcmxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgYWN0aXZlIHRodW1ibmFpbCBzdGF0ZVxuICAgICAgICAkKCcucHJvZHVjdFZpZXctdGh1bWJuYWlscyBbZGF0YS1pbWFnZS1nYWxsZXJ5LWl0ZW1dLCAucHJvZHVjdFZpZXctdGh1bWJuYWlscyBbZGF0YS1pbWFnZS1nYWxsZXJ5LXZpZGVvXScpLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgJHRhcmdldC5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgdGhlIG1haW4gaW1hZ2Ugem9vbSBmdW5jdGlvbmFsaXR5IGlmIGl0IGV4aXN0c1xuICAgICAgICBjb25zdCAkem9vbUNvbnRhaW5lciA9ICQoJy5wcm9kdWN0Vmlldy1pbWFnZSBbZGF0YS16b29tLWltYWdlXScpO1xuICAgICAgICBpZiAoJHpvb21Db250YWluZXIubGVuZ3RoID4gMCAmJiB6b29tSW1hZ2VVcmwpIHtcbiAgICAgICAgICAgICR6b29tQ29udGFpbmVyLmF0dHIoJ2RhdGEtem9vbS1pbWFnZScsIHpvb21JbWFnZVVybCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKCdTcGxpdCBMYXlvdXQ6IENoYW5nZWQgbWFpbiBpbWFnZSB0byBpbmRleCcsIGltYWdlSW5kZXgsICdzcmM6JywgbmV3SW1hZ2VVcmwpO1xuICAgIH1cbiAgICBcbiAgICBzZXR1cE1haW5JbWFnZVN3aXBlKCkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnU2V0dGluZyB1cCBtYWluIGltYWdlIHN3aXBlIGhhbmRsZXJzJyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCAkbWFpbkltYWdlQ29udGFpbmVyID0gJCgnLnByb2R1Y3RWaWV3LnNwbGl0LWxheW91dCAucHJvZHVjdFZpZXctaW1hZ2UgLnByb2R1Y3RWaWV3LWltZy1jb250YWluZXInKTtcbiAgICAgICAgaWYgKCRtYWluSW1hZ2VDb250YWluZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnTm8gbWFpbiBpbWFnZSBjb250YWluZXIgZm91bmQgZm9yIHN3aXBlJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdGb3VuZCBtYWluIGltYWdlIGNvbnRhaW5lcjonLCAkbWFpbkltYWdlQ29udGFpbmVyWzBdKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCB1cCB0b3VjaCBldmVudHMgZm9yIG1vYmlsZSBhbmQgZGV2aWNlIGVtdWxhdGlvblxuICAgICAgICBsZXQgc3RhcnRYID0gbnVsbDtcbiAgICAgICAgbGV0IHN0YXJ0WSA9IG51bGw7XG4gICAgICAgIGxldCBpc1Njcm9sbGluZyA9IG51bGw7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgYW55IGV4aXN0aW5nIHN3aXBlIGhhbmRsZXJzXG4gICAgICAgICRtYWluSW1hZ2VDb250YWluZXIub2ZmKCcuc3dpcGUnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRvdWNoIHN0YXJ0XG4gICAgICAgICRtYWluSW1hZ2VDb250YWluZXIub24oJ3RvdWNoc3RhcnQuc3dpcGUnLCAoZSkgPT4ge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1RvdWNoIHN0YXJ0IGRldGVjdGVkIG9uIG1haW4gaW1hZ2U6JywgZS5vcmlnaW5hbEV2ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IHRvdWNoID0gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF07XG4gICAgICAgICAgICBzdGFydFggPSB0b3VjaC5jbGllbnRYO1xuICAgICAgICAgICAgc3RhcnRZID0gdG91Y2guY2xpZW50WTtcbiAgICAgICAgICAgIGlzU2Nyb2xsaW5nID0gbnVsbDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1RvdWNoIHN0YXJ0IGNvb3JkaW5hdGVzOicsIHsgc3RhcnRYLCBzdGFydFkgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFkZCB2aXN1YWwgZmVlZGJhY2tcbiAgICAgICAgICAgICRtYWluSW1hZ2VDb250YWluZXIuY3NzKCdvcGFjaXR5JywgJzAuOScpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFRvdWNoIG1vdmVcbiAgICAgICAgJG1haW5JbWFnZUNvbnRhaW5lci5vbigndG91Y2htb3ZlLnN3aXBlJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmICghc3RhcnRYIHx8ICFzdGFydFkpIHJldHVybjtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdG91Y2ggPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXTtcbiAgICAgICAgICAgIGNvbnN0IGRlbHRhWCA9IHRvdWNoLmNsaWVudFggLSBzdGFydFg7XG4gICAgICAgICAgICBjb25zdCBkZWx0YVkgPSB0b3VjaC5jbGllbnRZIC0gc3RhcnRZO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnVG91Y2ggbW92ZSAtIGRlbHRhczonLCB7IGRlbHRhWCwgZGVsdGFZIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgaWYgdXNlciBpcyBzY3JvbGxpbmcgdmVydGljYWxseSBvciBzd2lwaW5nIGhvcml6b250YWxseVxuICAgICAgICAgICAgaWYgKGlzU2Nyb2xsaW5nID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgaXNTY3JvbGxpbmcgPSBNYXRoLmFicyhkZWx0YVkpID4gTWF0aC5hYnMoZGVsdGFYKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnRGV0ZXJtaW5lZCBzY3JvbGxpbmcgZGlyZWN0aW9uOicsIGlzU2Nyb2xsaW5nID8gJ3ZlcnRpY2FsJyA6ICdob3Jpem9udGFsJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIElmIGhvcml6b250YWwgc3dpcGUsIHByZXZlbnQgZGVmYXVsdCBzY3JvbGxpbmdcbiAgICAgICAgICAgIGlmICghaXNTY3JvbGxpbmcgJiYgTWF0aC5hYnMoZGVsdGFYKSA+IDEwKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdIb3Jpem9udGFsIHN3aXBlIGRldGVjdGVkLCBwcmV2ZW50aW5nIGRlZmF1bHQnKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBBZGQgdmlzdWFsIGZlZWRiYWNrIGR1cmluZyBzd2lwZVxuICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zbGF0ZVggPSBkZWx0YVggKiAwLjE7IC8vIFN1YnRsZSBtb3ZlbWVudCBmZWVkYmFja1xuICAgICAgICAgICAgICAgICRtYWluSW1hZ2VDb250YWluZXIuY3NzKCd0cmFuc2Zvcm0nLCBgdHJhbnNsYXRlWCgke3RyYW5zbGF0ZVh9cHgpYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gVG91Y2ggZW5kXG4gICAgICAgICRtYWluSW1hZ2VDb250YWluZXIub24oJ3RvdWNoZW5kLnN3aXBlJywgKGUpID0+IHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdUb3VjaCBlbmQgZGV0ZWN0ZWQgb24gbWFpbiBpbWFnZScpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZW1vdmUgdmlzdWFsIGZlZWRiYWNrXG4gICAgICAgICAgICAkbWFpbkltYWdlQ29udGFpbmVyLmNzcyh7XG4gICAgICAgICAgICAgICAgJ29wYWNpdHknOiAnMScsXG4gICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdub25lJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghc3RhcnRYIHx8ICFzdGFydFkgfHwgaXNTY3JvbGxpbmcpIHtcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnVG91Y2ggZW5kIC0gbm8gc3dpcGUgYWN0aW9uIChzY3JvbGxpbmcgb3Igbm8gc3RhcnQgcG9zaXRpb24pJyk7XG4gICAgICAgICAgICAgICAgc3RhcnRYID0gbnVsbDtcbiAgICAgICAgICAgICAgICBzdGFydFkgPSBudWxsO1xuICAgICAgICAgICAgICAgIGlzU2Nyb2xsaW5nID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHRvdWNoID0gZS5vcmlnaW5hbEV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgICAgICAgICAgY29uc3QgZGVsdGFYID0gdG91Y2guY2xpZW50WCAtIHN0YXJ0WDtcbiAgICAgICAgICAgIGNvbnN0IGRlbHRhWSA9IHRvdWNoLmNsaWVudFkgLSBzdGFydFk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE1pbmltdW0gc3dpcGUgZGlzdGFuY2VcbiAgICAgICAgICAgIGNvbnN0IG1pblN3aXBlRGlzdGFuY2UgPSA1MDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1RvdWNoIGVuZCAtIGFuYWx5emluZyBzd2lwZTonLCB7IGRlbHRhWCwgZGVsdGFZLCBtaW5Td2lwZURpc3RhbmNlIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDaGVjayBmb3IgaG9yaXpvbnRhbCBzd2lwZVxuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRlbHRhWCkgPiBtaW5Td2lwZURpc3RhbmNlICYmIE1hdGguYWJzKGRlbHRhWSkgPCAxMDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVsdGFYID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBTd2lwZSByaWdodCAtIGdvIHRvIHByZXZpb3VzIGltYWdlXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdTd2lwZSByaWdodCBkZXRlY3RlZCAtIGdvaW5nIHRvIHByZXZpb3VzIGltYWdlJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGVUb0ltYWdlKCdwcmV2aW91cycpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFN3aXBlIGxlZnQgLSBnbyB0byBuZXh0IGltYWdlXG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdTd2lwZSBsZWZ0IGRldGVjdGVkIC0gZ29pbmcgdG8gbmV4dCBpbWFnZScpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5hdmlnYXRlVG9JbWFnZSgnbmV4dCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ05vIHN3aXBlIGFjdGlvbiAtIGluc3VmZmljaWVudCBkaXN0YW5jZSBvciB2ZXJ0aWNhbCBtb3ZlbWVudCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBSZXNldCB2YWx1ZXNcbiAgICAgICAgICAgIHN0YXJ0WCA9IG51bGw7XG4gICAgICAgICAgICBzdGFydFkgPSBudWxsO1xuICAgICAgICAgICAgaXNTY3JvbGxpbmcgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1vdXNlIGV2ZW50cyBmb3IgZGVza3RvcCB0ZXN0aW5nICh3aGVuIE5PVCBpbiBkZXZpY2UgZW11bGF0aW9uIG1vZGUpXG4gICAgICAgIGxldCBtb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgbGV0IG1vdXNlU3RhcnRYID0gbnVsbDtcbiAgICAgICAgbGV0IG1vdXNlU3RhcnRZID0gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIC8vIE9ubHkgYWRkIG1vdXNlIGV2ZW50cyBpZiB0b3VjaCBpcyBOT1Qgc3VwcG9ydGVkIChwdXJlIGRlc2t0b3ApXG4gICAgICAgIGlmICghKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdUb3VjaCBub3Qgc3VwcG9ydGVkIC0gYWRkaW5nIG1vdXNlIGV2ZW50cyBmb3IgZGVza3RvcCB0ZXN0aW5nJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICRtYWluSW1hZ2VDb250YWluZXIub24oJ21vdXNlZG93bi5zd2lwZScsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ01vdXNlIGRvd24gZGV0ZWN0ZWQgb24gbWFpbiBpbWFnZSAoZGVza3RvcCBtb2RlKScpO1xuICAgICAgICAgICAgICAgIG1vdXNlRG93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgbW91c2VTdGFydFggPSBlLmNsaWVudFg7XG4gICAgICAgICAgICAgICAgbW91c2VTdGFydFkgPSBlLmNsaWVudFk7XG4gICAgICAgICAgICAgICAgJG1haW5JbWFnZUNvbnRhaW5lci5jc3MoJ29wYWNpdHknLCAnMC45Jyk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgICRtYWluSW1hZ2VDb250YWluZXIub24oJ21vdXNlbW92ZS5zd2lwZScsIChlKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFtb3VzZURvd24pIHJldHVybjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVggPSBlLmNsaWVudFggLSBtb3VzZVN0YXJ0WDtcbiAgICAgICAgICAgICAgICBjb25zdCBkZWx0YVkgPSBlLmNsaWVudFkgLSBtb3VzZVN0YXJ0WTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBQcmV2ZW50IHRleHQgc2VsZWN0aW9uXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFZpc3VhbCBmZWVkYmFjayBkdXJpbmcgZHJhZ1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhkZWx0YVgpID4gMTApIHtcbiAgICAgICAgICAgICAgICAgICAgJG1haW5JbWFnZUNvbnRhaW5lci5jc3MoJ3RyYW5zZm9ybScsIGB0cmFuc2xhdGVYKCR7ZGVsdGFYICogMC4yfXB4KWApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAkbWFpbkltYWdlQ29udGFpbmVyLm9uKCdtb3VzZXVwLnN3aXBlJywgKGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIW1vdXNlRG93bikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdNb3VzZSB1cCBkZXRlY3RlZCBvbiBtYWluIGltYWdlIChkZXNrdG9wIG1vZGUpJyk7XG4gICAgICAgICAgICAgICAgbW91c2VEb3duID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgdmlzdWFsIGZlZWRiYWNrXG4gICAgICAgICAgICAgICAgJG1haW5JbWFnZUNvbnRhaW5lci5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnb3BhY2l0eSc6ICcxJyxcbiAgICAgICAgICAgICAgICAgICAgJ3RyYW5zZm9ybSc6ICdub25lJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhWCA9IGUuY2xpZW50WCAtIG1vdXNlU3RhcnRYO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbHRhWSA9IGUuY2xpZW50WSAtIG1vdXNlU3RhcnRZO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pblN3aXBlRGlzdGFuY2UgPSA1MDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnTW91c2UgZHJhZyAtIGFuYWx5emluZyBzd2lwZTonLCB7IGRlbHRhWCwgZGVsdGFZLCBtaW5Td2lwZURpc3RhbmNlIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIENoZWNrIGZvciBob3Jpem9udGFsIHN3aXBlXG4gICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRlbHRhWCkgPiBtaW5Td2lwZURpc3RhbmNlICYmIE1hdGguYWJzKGRlbHRhWSkgPCAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhWCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIERyYWcgcmlnaHQgLSBnbyB0byBwcmV2aW91cyBpbWFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ01vdXNlIGRyYWcgcmlnaHQgZGV0ZWN0ZWQgLSBnb2luZyB0byBwcmV2aW91cyBpbWFnZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvSW1hZ2UoJ3ByZXZpb3VzJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEcmFnIGxlZnQgLSBnbyB0byBuZXh0IGltYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnTW91c2UgZHJhZyBsZWZ0IGRldGVjdGVkIC0gZ29pbmcgdG8gbmV4dCBpbWFnZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5uYXZpZ2F0ZVRvSW1hZ2UoJ25leHQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIYW5kbGUgbW91c2UgbGVhdmUgdG8gcmVzZXQgc3RhdGVcbiAgICAgICAgICAgICRtYWluSW1hZ2VDb250YWluZXIub24oJ21vdXNlbGVhdmUuc3dpcGUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG1vdXNlRG93bikge1xuICAgICAgICAgICAgICAgICAgICBtb3VzZURvd24gPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgJG1haW5JbWFnZUNvbnRhaW5lci5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ29wYWNpdHknOiAnMScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHJhbnNmb3JtJzogJ25vbmUnXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ1RvdWNoIHN1cHBvcnRlZCAtIHNraXBwaW5nIG1vdXNlIGV2ZW50cyAod2lsbCB1c2UgdG91Y2ggZXZlbnRzIGluIGRldmljZSBlbXVsYXRpb24pJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdNYWluIGltYWdlIHN3aXBlIGhhbmRsZXJzIHNldCB1cCcpO1xuICAgIH1cbiAgICBcbiAgICBuYXZpZ2F0ZVRvSW1hZ2UoZGlyZWN0aW9uKSB7XG4gICAgICAgIGNvbnN0ICR0aHVtYm5haWxzID0gJCgnLnByb2R1Y3RWaWV3LnNwbGl0LWxheW91dCAucHJvZHVjdFZpZXctdGh1bWJuYWlscycpO1xuICAgICAgICBjb25zdCAkYWxsVGh1bWJuYWlscyA9ICR0aHVtYm5haWxzLmZpbmQoJ1tkYXRhLWltYWdlLWdhbGxlcnktaXRlbV0sIFtkYXRhLWltYWdlLWdhbGxlcnktdmlkZW9dJyk7XG4gICAgICAgIGNvbnN0ICRjdXJyZW50QWN0aXZlID0gJGFsbFRodW1ibmFpbHMuZmlsdGVyKCcuaXMtYWN0aXZlJyk7XG4gICAgICAgIFxuICAgICAgICBpZiAoJGFsbFRodW1ibmFpbHMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBsZXQgJG5leHRUaHVtYm5haWwgPSBudWxsO1xuICAgICAgICBcbiAgICAgICAgaWYgKCRjdXJyZW50QWN0aXZlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgLy8gTm8gYWN0aXZlIHRodW1ibmFpbCwgc3RhcnQgd2l0aCBmaXJzdFxuICAgICAgICAgICAgJG5leHRUaHVtYm5haWwgPSAkYWxsVGh1bWJuYWlscy5maXJzdCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gJGFsbFRodW1ibmFpbHMuaW5kZXgoJGN1cnJlbnRBY3RpdmUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAnbmV4dCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0SW5kZXggPSAoY3VycmVudEluZGV4ICsgMSkgJSAkYWxsVGh1bWJuYWlscy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgJG5leHRUaHVtYm5haWwgPSAkYWxsVGh1bWJuYWlscy5lcShuZXh0SW5kZXgpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChkaXJlY3Rpb24gPT09ICdwcmV2aW91cycpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwcmV2SW5kZXggPSBjdXJyZW50SW5kZXggPT09IDAgPyAkYWxsVGh1bWJuYWlscy5sZW5ndGggLSAxIDogY3VycmVudEluZGV4IC0gMTtcbiAgICAgICAgICAgICAgICAkbmV4dFRodW1ibmFpbCA9ICRhbGxUaHVtYm5haWxzLmVxKHByZXZJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICgkbmV4dFRodW1ibmFpbCAmJiAkbmV4dFRodW1ibmFpbC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhgTmF2aWdhdGluZyB0byAke2RpcmVjdGlvbn0gaW1hZ2UgdmlhIHN3aXBlYCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRyaWdnZXIgY2xpY2sgb24gdGhlIHRodW1ibmFpbCB0byBjaGFuZ2UgdGhlIG1haW4gaW1hZ2VcbiAgICAgICAgICAgIGNvbnN0IGNsaWNrRXZlbnQgPSAkLkV2ZW50KCdjbGljaycsIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50VGFyZ2V0OiAkbmV4dFRodW1ibmFpbFswXSxcbiAgICAgICAgICAgICAgICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oKSB7fSxcbiAgICAgICAgICAgICAgICBzdG9wUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkge31cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0eXBlID0gJG5leHRUaHVtYm5haWwuYXR0cignZGF0YS10eXBlJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRyeSB0byB1c2UgaW1hZ2UgZ2FsbGVyeSBpbnN0YW5jZSBmaXJzdFxuICAgICAgICAgICAgbGV0IGltYWdlR2FsbGVyeSA9IG51bGw7XG4gICAgICAgICAgICBpZiAod2luZG93LnByb2R1Y3REZXRhaWxzICYmIHdpbmRvdy5wcm9kdWN0RGV0YWlscy5pbWFnZUdhbGxlcnkpIHtcbiAgICAgICAgICAgICAgICBpbWFnZUdhbGxlcnkgPSB3aW5kb3cucHJvZHVjdERldGFpbHMuaW1hZ2VHYWxsZXJ5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaW1hZ2VHYWxsZXJ5ICYmIHR5cGVvZiBpbWFnZUdhbGxlcnkuc2VsZWN0TmV3SW1hZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBpbWFnZUdhbGxlcnkuc2VsZWN0TmV3SW1hZ2UoY2xpY2tFdmVudCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY2hhbmdlTWFpbkltYWdlTWFudWFsbHkoJG5leHRUaHVtYm5haWwsIHR5cGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEhlbHBlciBtZXRob2QgZm9yIHRlc3Rpbmcgc3dpcGUgZnVuY3Rpb25hbGl0eSBmcm9tIGRlc2t0b3AgY29uc29sZVxuICAgIHRlc3RTd2lwZShkaXJlY3Rpb24gPSAnbmV4dCcpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYFRlc3Rpbmcgc3dpcGUgJHtkaXJlY3Rpb259IGZyb20gY29uc29sZWApO1xuICAgICAgICB0aGlzLm5hdmlnYXRlVG9JbWFnZShkaXJlY3Rpb24pO1xuICAgIH1cbiAgICBcbiAgICAvLyBFeHBvc2UgdGhpcyBpbnN0YW5jZSBnbG9iYWxseSBmb3IgdGVzdGluZ1xuICAgIGluaXQoKSB7XG4gICAgICAgIHdpbmRvdy5zcGxpdExheW91dENhcm91c2VsID0gdGhpcztcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1NwbGl0IGxheW91dCBjYXJvdXNlbCBpbnN0YW5jZSBleHBvc2VkIGFzIHdpbmRvdy5zcGxpdExheW91dENhcm91c2VsJyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdUZXN0IHN3aXBlIHdpdGg6IHdpbmRvdy5zcGxpdExheW91dENhcm91c2VsLnRlc3RTd2lwZShcIm5leHRcIikgb3Igd2luZG93LnNwbGl0TGF5b3V0Q2Fyb3VzZWwudGVzdFN3aXBlKFwicHJldmlvdXNcIiknKTtcbiAgICB9XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBRUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBOztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./assets/js/theme/custom/split-layout-carousel.js\n");

/***/ }),

/***/ "./assets/js/theme/product.js":
/*!************************************!*\
  !*** ./assets/js/theme/product.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Product; });\n/* harmony import */ var _page_manager__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./page-manager */ \"./assets/js/theme/page-manager.js\");\n/* harmony import */ var _product_reviews__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./product/reviews */ \"./assets/js/theme/product/reviews.js\");\n/* harmony import */ var _common_collapsible__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./common/collapsible */ \"./assets/js/theme/common/collapsible.js\");\n/* harmony import */ var _common_product_details__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./common/product-details */ \"./assets/js/theme/common/product-details.js\");\n/* harmony import */ var _product_video_gallery__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./product/video-gallery */ \"./assets/js/theme/product/video-gallery.js\");\n/* harmony import */ var _common_utils_form_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./common/utils/form-utils */ \"./assets/js/theme/common/utils/form-utils.js\");\n/* harmony import */ var _global_modal__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./global/modal */ \"./assets/js/theme/global/modal.js\");\n/* harmony import */ var _custom_its_product__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./custom/its-product */ \"./assets/js/theme/custom/its-product.js\");\n/* harmony import */ var _custom_dual_panel_scroll__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./custom/dual-panel-scroll */ \"./assets/js/theme/custom/dual-panel-scroll.js\");\n/* harmony import */ var _custom_split_layout_carousel__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./custom/split-layout-carousel */ \"./assets/js/theme/custom/split-layout-carousel.js\");\n/* harmony import */ var _custom_mobile_sticky_cart_validator__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./custom/mobile-sticky-cart-validator */ \"./assets/js/theme/custom/mobile-sticky-cart-validator.js\");\n/* harmony import */ var _product_image_gallery__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./product/image-gallery */ \"./assets/js/theme/product/image-gallery.js\");\n/* harmony import */ var _product_image_gallery__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_product_image_gallery__WEBPACK_IMPORTED_MODULE_11__);\nfunction _inheritsLoose(t, o) { t.prototype = Object.create(o.prototype), t.prototype.constructor = t, _setPrototypeOf(t, o); }\nfunction _setPrototypeOf(t, e) { return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) { return t.__proto__ = e, t; }, _setPrototypeOf(t, e); }\n/*\n Import all product specific js\n */\n\n\n\n\n\n\n\n\n\n\n\n\nvar Product = /*#__PURE__*/function (_PageManager) {\n  function Product(context) {\n    var _this;\n    _this = _PageManager.call(this, context) || this;\n    _this.url = window.location.href;\n    _this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\n    _this.$bulkPricingLink = $('[data-reveal-id=\"modal-bulk-pricing\"]');\n    _this.reviewModal = Object(_global_modal__WEBPACK_IMPORTED_MODULE_6__[\"default\"])('#modal-review-form')[0];\n    return _this;\n  }\n  _inheritsLoose(Product, _PageManager);\n  var _proto = Product.prototype;\n  _proto.onReady = function onReady() {\n    var _this2 = this,\n      _document$querySelect;\n    // Remove hidden product form (mobile or desktop) from the DOM, robust for AJAX/Stencil swaps\n    function removeHiddenProductForm() {\n      var isMobile = window.innerWidth <= 1024;\n      if (isMobile) {\n        // Remove desktop form\n        var desktopForm = document.querySelector('.details-panel .productView-options form');\n        if (desktopForm) desktopForm.remove();\n      } else {\n        // Remove mobile form\n        var mobileForm = document.querySelector('.details-panel-inline .productView-options form');\n        if (mobileForm) mobileForm.remove();\n      }\n    }\n\n    // Initial run\n    removeHiddenProductForm();\n\n    // MutationObserver to watch for DOM changes in the product details area\n    var productView = document.querySelector('.productView');\n    if (productView) {\n      var observer = new MutationObserver(function (mutations) {\n        // Remove hidden form whenever DOM changes\n        removeHiddenProductForm();\n      });\n      observer.observe(productView, {\n        childList: true,\n        subtree: true\n      });\n    }\n\n    // Also run on resize\n    window.addEventListener('resize', function () {\n      // Only run if both forms are present\n      var desktopForm = document.querySelector('.details-panel .productView-options form');\n      var mobileForm = document.querySelector('.details-panel-inline .productView-options form');\n      if (desktopForm && mobileForm) removeHiddenProductForm();\n    });\n\n    // Listen for foundation modal close events to sanitize URL after review.\n    $(document).on('close.fndtn.reveal', function () {\n      if (_this2.url.indexOf('#write_review') !== -1 && typeof window.history.replaceState === 'function') {\n        window.history.replaceState(null, document.title, window.location.pathname);\n      }\n    });\n    var validator;\n\n    // Init collapsible\n    Object(_common_collapsible__WEBPACK_IMPORTED_MODULE_2__[\"default\"])();\n\n    // Fix duplicate IDs in details-panel-inline by appending '-inline' to all IDs and updating label 'for' attributes\n    function fixInlinePanelIds() {\n      var $inlinePanel = $('.details-panel-inline');\n      $inlinePanel.find('[id]').each(function () {\n        var oldId = $(this).attr('id');\n        if (!oldId.endsWith('-inline')) {\n          var newId = oldId + '-inline';\n          // Update the element's ID\n          $(this).attr('id', newId);\n          // Update any label referencing this ID\n          $inlinePanel.find(\"label[for=\\\"\" + oldId + \"\\\"]\").attr('for', newId);\n        }\n      });\n    }\n    fixInlinePanelIds();\n    this.productDetails = new _common_product_details__WEBPACK_IMPORTED_MODULE_3__[\"default\"]($('.productView'), this.context, window.BCData.product_attributes);\n    this.productDetails.setProductVariant();\n\n    // Inline/mobile panel\n    if ($('.details-panel-inline').length) {\n      this.productDetailsInline = new _common_product_details__WEBPACK_IMPORTED_MODULE_3__[\"default\"]($('.details-panel-inline'), this.context, window.BCData.product_attributes);\n      this.productDetailsInline.setProductVariant();\n    }\n\n    // --- Sync product options between main and inline forms ---\n    function syncProductOptions(sourceFormSelector, targetFormSelector) {\n      var $source = $(sourceFormSelector);\n      var $target = $(targetFormSelector);\n      $source.find('[name]').each(function () {\n        var name = $(this).attr('name');\n        // For radio/checkbox, sync checked state; for others, sync value\n        var type = $(this).attr('type');\n        if (type === 'radio' || type === 'checkbox') {\n          if ($(this).is(':checked')) {\n            $target.find(\"[name=\\\"\" + name + \"\\\"][value=\\\"\" + $(this).val() + \"\\\"]\").prop('checked', true).trigger('change');\n          }\n        } else {\n          $target.find(\"[name=\\\"\" + name + \"\\\"]\").val($(this).val()).trigger('change');\n        }\n      });\n    }\n    $('#productOptionsForm').on('change', function () {\n      syncProductOptions('#productOptionsForm', '#productOptionsForm-inline');\n    });\n    $('#productOptionsForm-inline').on('change', function () {\n      syncProductOptions('#productOptionsForm-inline', '#productOptionsForm');\n    });\n\n    // --- Update price in sticky cart section for inline panel ---\n    function updateInlineStickyCartPrice() {\n      // Get the updated price from the inline panel\n      var inlinePrice = document.querySelector('.details-panel-inline .productView-price');\n      var stickyPrice = document.querySelector('.sticky-cart-section-mobile .sticky-cart-product-price');\n      if (inlinePrice && stickyPrice) {\n        stickyPrice.innerHTML = inlinePrice.innerHTML;\n      }\n    }\n    // Run once on page load\n    updateInlineStickyCartPrice();\n    // Run whenever product options change in inline panel\n    (_document$querySelect = document.querySelector('#productOptionsForm-inline')) == null || _document$querySelect.addEventListener('change', function (e) {\n      setTimeout(updateInlineStickyCartPrice, 100);\n    });\n    // Also observe for price changes in inline panel (in case price updates via AJAX)\n    var inlinePriceEl = document.querySelector('.details-panel-inline .productView-price');\n    if (inlinePriceEl) {\n      var observerInlineSticky = new MutationObserver(updateInlineStickyCartPrice);\n      observerInlineSticky.observe(inlinePriceEl, {\n        childList: true,\n        subtree: true\n      });\n    }\n    Object(_product_video_gallery__WEBPACK_IMPORTED_MODULE_4__[\"default\"])();\n    this.bulkPricingHandler();\n    var $reviewForm = Object(_common_utils_form_utils__WEBPACK_IMPORTED_MODULE_5__[\"classifyForm\"])('.writeReview-form');\n    this.ITSProduct = new _custom_its_product__WEBPACK_IMPORTED_MODULE_7__[\"default\"](this.context);\n\n    // Initialize dual-panel scroll synchronization for split layout\n    this.dualPanelScroll = new _custom_dual_panel_scroll__WEBPACK_IMPORTED_MODULE_8__[\"default\"]();\n\n    // Initialize split layout carousel override\n    this.splitLayoutCarousel = new _custom_split_layout_carousel__WEBPACK_IMPORTED_MODULE_9__[\"default\"]();\n\n    // Initialize mobile sticky cart validator (scroll-to-error + popup notification)\n    this.mobileStickyCartValidator = new _custom_mobile_sticky_cart_validator__WEBPACK_IMPORTED_MODULE_10__[\"default\"]();\n    if ($reviewForm.length === 0) return;\n    var review = new _product_reviews__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n      $reviewForm: $reviewForm\n    });\n    $('body').on('click', '[data-reveal-id=\"modal-review-form\"]', function () {\n      validator = review.registerValidation(_this2.context);\n      _this2.ariaDescribeReviewInputs($reviewForm);\n    });\n    $reviewForm.on('submit', function () {\n      if (validator) {\n        validator.performCheck();\n        return validator.areAll('valid');\n      }\n      return false;\n    });\n    this.productReviewHandler();\n\n    // --- Sticky Cart Price Sync (Improved) ---\n    function updateStickyCartPrice() {\n      // Main price area\n      var mainWithTax = document.querySelector('.productView .price--withTax');\n      var mainWithoutTax = document.querySelector('.productView .price--withoutTax');\n      // Sticky cart area\n      var stickyWithTax = document.querySelector('.sticky-cart-product-price .price--withTax');\n      var stickyWithoutTax = document.querySelector('.sticky-cart-product-price .price--withoutTax');\n      if (mainWithTax && stickyWithTax) {\n        stickyWithTax.innerHTML = mainWithTax.innerHTML;\n      }\n      if (mainWithoutTax && stickyWithoutTax) {\n        stickyWithoutTax.innerHTML = mainWithoutTax.innerHTML;\n      }\n    }\n\n    // Run once on page load\n    updateStickyCartPrice();\n\n    // Run whenever product options change\n    document.addEventListener('change', function (e) {\n      if (e.target.closest('.productView-options')) {\n        setTimeout(updateStickyCartPrice, 100);\n      }\n    });\n\n    // Also observe for price changes (in case price updates via AJAX)\n    var mainPrice = document.querySelector('.productView-price');\n    if (mainPrice) {\n      var observerPrice = new MutationObserver(updateStickyCartPrice);\n      observerPrice.observe(mainPrice, {\n        childList: true,\n        subtree: true\n      });\n    }\n\n    // --- Sync data-product-price-without-tax in .details-panel-inline ---\n    function updateInlinePanelPrice() {\n      // Always copy from desktop/main panel to inline/mobile panel\n      var mainPrice = document.querySelector('.details-panel .productView-price [data-product-price-without-tax]');\n      var inlinePanel = document.querySelector('.details-panel-inline .productView-price [data-product-price-without-tax]');\n      if (mainPrice && inlinePanel) {\n        inlinePanel.innerHTML = mainPrice.innerHTML;\n      }\n    }\n\n    // Run once on page load\n    updateInlinePanelPrice();\n\n    // Run whenever product options change\n    document.addEventListener('change', function (e) {\n      if (e.target.closest('.productView-options')) {\n        setTimeout(updateInlinePanelPrice, 100);\n      }\n    });\n\n    // Also observe for price changes (in case price updates via AJAX)\n    var mainPriceInline = document.querySelector('.details-panel .productView-price [data-product-price-without-tax]');\n    if (mainPriceInline) {\n      var observerInline = new MutationObserver(updateInlinePanelPrice);\n      observerInline.observe(mainPriceInline, {\n        childList: true,\n        subtree: true\n      });\n    }\n  };\n  _proto.ariaDescribeReviewInputs = function ariaDescribeReviewInputs($form) {\n    $form.find('[data-input]').each(function (_, input) {\n      var $input = $(input);\n      var msgSpanId = $input.attr('name') + \"-msg\";\n      $input.siblings('span').attr('id', msgSpanId);\n      $input.attr('aria-describedby', msgSpanId);\n    });\n  };\n  _proto.productReviewHandler = function productReviewHandler() {\n    if (this.url.indexOf('#write_review') !== -1) {\n      this.$reviewLink.trigger('click');\n    }\n  };\n  _proto.bulkPricingHandler = function bulkPricingHandler() {\n    if (this.url.indexOf('#bulk_pricing') !== -1) {\n      this.$bulkPricingLink.trigger('click');\n    }\n  };\n  return Product;\n}(_page_manager__WEBPACK_IMPORTED_MODULE_0__[\"default\"]);\n\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.min.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvanMvdGhlbWUvcHJvZHVjdC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2Fzc2V0cy9qcy90aGVtZS9wcm9kdWN0LmpzPzgzNjQiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiBJbXBvcnQgYWxsIHByb2R1Y3Qgc3BlY2lmaWMganNcbiAqL1xuaW1wb3J0IFBhZ2VNYW5hZ2VyIGZyb20gJy4vcGFnZS1tYW5hZ2VyJztcbmltcG9ydCBSZXZpZXcgZnJvbSAnLi9wcm9kdWN0L3Jldmlld3MnO1xuaW1wb3J0IGNvbGxhcHNpYmxlRmFjdG9yeSBmcm9tICcuL2NvbW1vbi9jb2xsYXBzaWJsZSc7XG5pbXBvcnQgUHJvZHVjdERldGFpbHMgZnJvbSAnLi9jb21tb24vcHJvZHVjdC1kZXRhaWxzJztcbmltcG9ydCB2aWRlb0dhbGxlcnkgZnJvbSAnLi9wcm9kdWN0L3ZpZGVvLWdhbGxlcnknO1xuaW1wb3J0IHsgY2xhc3NpZnlGb3JtIH0gZnJvbSAnLi9jb21tb24vdXRpbHMvZm9ybS11dGlscyc7XG5pbXBvcnQgbW9kYWxGYWN0b3J5IGZyb20gJy4vZ2xvYmFsL21vZGFsJztcbmltcG9ydCBJVFNQcm9kdWN0IGZyb20gJy4vY3VzdG9tL2l0cy1wcm9kdWN0JztcbmltcG9ydCBEdWFsUGFuZWxTY3JvbGwgZnJvbSAnLi9jdXN0b20vZHVhbC1wYW5lbC1zY3JvbGwnO1xuaW1wb3J0IFNwbGl0TGF5b3V0Q2Fyb3VzZWwgZnJvbSAnLi9jdXN0b20vc3BsaXQtbGF5b3V0LWNhcm91c2VsJztcbmltcG9ydCBNb2JpbGVTdGlja3lDYXJ0VmFsaWRhdG9yIGZyb20gJy4vY3VzdG9tL21vYmlsZS1zdGlja3ktY2FydC12YWxpZGF0b3InO1xuaW1wb3J0ICcuL3Byb2R1Y3QvaW1hZ2UtZ2FsbGVyeSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2R1Y3QgZXh0ZW5kcyBQYWdlTWFuYWdlciB7XG4gICAgY29uc3RydWN0b3IoY29udGV4dCkge1xuICAgICAgICBzdXBlcihjb250ZXh0KTtcbiAgICAgICAgdGhpcy51cmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcbiAgICAgICAgdGhpcy4kcmV2aWV3TGluayA9ICQoJ1tkYXRhLXJldmVhbC1pZD1cIm1vZGFsLXJldmlldy1mb3JtXCJdJyk7XG4gICAgICAgIHRoaXMuJGJ1bGtQcmljaW5nTGluayA9ICQoJ1tkYXRhLXJldmVhbC1pZD1cIm1vZGFsLWJ1bGstcHJpY2luZ1wiXScpO1xuICAgICAgICB0aGlzLnJldmlld01vZGFsID0gbW9kYWxGYWN0b3J5KCcjbW9kYWwtcmV2aWV3LWZvcm0nKVswXTtcbiAgICB9XG5cbiAgICBvblJlYWR5KCkge1xuICAgICAgICAvLyBSZW1vdmUgaGlkZGVuIHByb2R1Y3QgZm9ybSAobW9iaWxlIG9yIGRlc2t0b3ApIGZyb20gdGhlIERPTSwgcm9idXN0IGZvciBBSkFYL1N0ZW5jaWwgc3dhcHNcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlSGlkZGVuUHJvZHVjdEZvcm0oKSB7XG4gICAgICAgICAgICB2YXIgaXNNb2JpbGUgPSB3aW5kb3cuaW5uZXJXaWR0aCA8PSAxMDI0O1xuICAgICAgICAgICAgaWYgKGlzTW9iaWxlKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGRlc2t0b3AgZm9ybVxuICAgICAgICAgICAgICAgIHZhciBkZXNrdG9wRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZXRhaWxzLXBhbmVsIC5wcm9kdWN0Vmlldy1vcHRpb25zIGZvcm0nKTtcbiAgICAgICAgICAgICAgICBpZiAoZGVza3RvcEZvcm0pIGRlc2t0b3BGb3JtLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbW9iaWxlIGZvcm1cbiAgICAgICAgICAgICAgICB2YXIgbW9iaWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZXRhaWxzLXBhbmVsLWlubGluZSAucHJvZHVjdFZpZXctb3B0aW9ucyBmb3JtJyk7XG4gICAgICAgICAgICAgICAgaWYgKG1vYmlsZUZvcm0pIG1vYmlsZUZvcm0ucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbml0aWFsIHJ1blxuICAgICAgICByZW1vdmVIaWRkZW5Qcm9kdWN0Rm9ybSgpO1xuXG4gICAgICAgIC8vIE11dGF0aW9uT2JzZXJ2ZXIgdG8gd2F0Y2ggZm9yIERPTSBjaGFuZ2VzIGluIHRoZSBwcm9kdWN0IGRldGFpbHMgYXJlYVxuICAgICAgICB2YXIgcHJvZHVjdFZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdFZpZXcnKTtcbiAgICAgICAgaWYgKHByb2R1Y3RWaWV3KSB7XG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihmdW5jdGlvbihtdXRhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgaGlkZGVuIGZvcm0gd2hlbmV2ZXIgRE9NIGNoYW5nZXNcbiAgICAgICAgICAgICAgICByZW1vdmVIaWRkZW5Qcm9kdWN0Rm9ybSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvYnNlcnZlci5vYnNlcnZlKHByb2R1Y3RWaWV3LCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFsc28gcnVuIG9uIHJlc2l6ZVxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBPbmx5IHJ1biBpZiBib3RoIGZvcm1zIGFyZSBwcmVzZW50XG4gICAgICAgICAgICB2YXIgZGVza3RvcEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGV0YWlscy1wYW5lbCAucHJvZHVjdFZpZXctb3B0aW9ucyBmb3JtJyk7XG4gICAgICAgICAgICB2YXIgbW9iaWxlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kZXRhaWxzLXBhbmVsLWlubGluZSAucHJvZHVjdFZpZXctb3B0aW9ucyBmb3JtJyk7XG4gICAgICAgICAgICBpZiAoZGVza3RvcEZvcm0gJiYgbW9iaWxlRm9ybSkgcmVtb3ZlSGlkZGVuUHJvZHVjdEZvcm0oKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gTGlzdGVuIGZvciBmb3VuZGF0aW9uIG1vZGFsIGNsb3NlIGV2ZW50cyB0byBzYW5pdGl6ZSBVUkwgYWZ0ZXIgcmV2aWV3LlxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xvc2UuZm5kdG4ucmV2ZWFsJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMudXJsLmluZGV4T2YoJyN3cml0ZV9yZXZpZXcnKSAhPT0gLTEgJiYgdHlwZW9mIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBkb2N1bWVudC50aXRsZSwgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IHZhbGlkYXRvcjtcblxuICAgICAgICAvLyBJbml0IGNvbGxhcHNpYmxlXG4gICAgICAgIGNvbGxhcHNpYmxlRmFjdG9yeSgpO1xuXG4gICAgICAgIC8vIEZpeCBkdXBsaWNhdGUgSURzIGluIGRldGFpbHMtcGFuZWwtaW5saW5lIGJ5IGFwcGVuZGluZyAnLWlubGluZScgdG8gYWxsIElEcyBhbmQgdXBkYXRpbmcgbGFiZWwgJ2ZvcicgYXR0cmlidXRlc1xuICAgICAgICBmdW5jdGlvbiBmaXhJbmxpbmVQYW5lbElkcygpIHtcbiAgICAgICAgICAgIGNvbnN0ICRpbmxpbmVQYW5lbCA9ICQoJy5kZXRhaWxzLXBhbmVsLWlubGluZScpO1xuICAgICAgICAgICAgJGlubGluZVBhbmVsLmZpbmQoJ1tpZF0nKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG9sZElkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgICAgIGlmICghb2xkSWQuZW5kc1dpdGgoJy1pbmxpbmUnKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdJZCA9IG9sZElkICsgJy1pbmxpbmUnO1xuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGVsZW1lbnQncyBJRFxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmF0dHIoJ2lkJywgbmV3SWQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgYW55IGxhYmVsIHJlZmVyZW5jaW5nIHRoaXMgSURcbiAgICAgICAgICAgICAgICAgICAgJGlubGluZVBhbmVsLmZpbmQoYGxhYmVsW2Zvcj1cIiR7b2xkSWR9XCJdYCkuYXR0cignZm9yJywgbmV3SWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGZpeElubGluZVBhbmVsSWRzKCk7XG5cbiAgICAgICAgdGhpcy5wcm9kdWN0RGV0YWlscyA9IG5ldyBQcm9kdWN0RGV0YWlscygkKCcucHJvZHVjdFZpZXcnKSwgdGhpcy5jb250ZXh0LCB3aW5kb3cuQkNEYXRhLnByb2R1Y3RfYXR0cmlidXRlcyk7XG4gICAgICAgIHRoaXMucHJvZHVjdERldGFpbHMuc2V0UHJvZHVjdFZhcmlhbnQoKTtcblxuICAgICAgICAvLyBJbmxpbmUvbW9iaWxlIHBhbmVsXG4gICAgICAgIGlmICgkKCcuZGV0YWlscy1wYW5lbC1pbmxpbmUnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMucHJvZHVjdERldGFpbHNJbmxpbmUgPSBuZXcgUHJvZHVjdERldGFpbHMoJCgnLmRldGFpbHMtcGFuZWwtaW5saW5lJyksIHRoaXMuY29udGV4dCwgd2luZG93LkJDRGF0YS5wcm9kdWN0X2F0dHJpYnV0ZXMpO1xuICAgICAgICAgICAgdGhpcy5wcm9kdWN0RGV0YWlsc0lubGluZS5zZXRQcm9kdWN0VmFyaWFudCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tIFN5bmMgcHJvZHVjdCBvcHRpb25zIGJldHdlZW4gbWFpbiBhbmQgaW5saW5lIGZvcm1zIC0tLVxuICAgICAgICBmdW5jdGlvbiBzeW5jUHJvZHVjdE9wdGlvbnMoc291cmNlRm9ybVNlbGVjdG9yLCB0YXJnZXRGb3JtU2VsZWN0b3IpIHtcbiAgICAgICAgICAgIGNvbnN0ICRzb3VyY2UgPSAkKHNvdXJjZUZvcm1TZWxlY3Rvcik7XG4gICAgICAgICAgICBjb25zdCAkdGFyZ2V0ID0gJCh0YXJnZXRGb3JtU2VsZWN0b3IpO1xuICAgICAgICAgICAgJHNvdXJjZS5maW5kKCdbbmFtZV0nKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSAkKHRoaXMpLmF0dHIoJ25hbWUnKTtcbiAgICAgICAgICAgICAgICAvLyBGb3IgcmFkaW8vY2hlY2tib3gsIHN5bmMgY2hlY2tlZCBzdGF0ZTsgZm9yIG90aGVycywgc3luYyB2YWx1ZVxuICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSAkKHRoaXMpLmF0dHIoJ3R5cGUnKTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ3JhZGlvJyB8fCB0eXBlID09PSAnY2hlY2tib3gnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLmlzKCc6Y2hlY2tlZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0LmZpbmQoYFtuYW1lPVwiJHtuYW1lfVwiXVt2YWx1ZT1cIiR7JCh0aGlzKS52YWwoKX1cIl1gKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSkudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0LmZpbmQoYFtuYW1lPVwiJHtuYW1lfVwiXWApLnZhbCgkKHRoaXMpLnZhbCgpKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAkKCcjcHJvZHVjdE9wdGlvbnNGb3JtJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc3luY1Byb2R1Y3RPcHRpb25zKCcjcHJvZHVjdE9wdGlvbnNGb3JtJywgJyNwcm9kdWN0T3B0aW9uc0Zvcm0taW5saW5lJyk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKCcjcHJvZHVjdE9wdGlvbnNGb3JtLWlubGluZScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHN5bmNQcm9kdWN0T3B0aW9ucygnI3Byb2R1Y3RPcHRpb25zRm9ybS1pbmxpbmUnLCAnI3Byb2R1Y3RPcHRpb25zRm9ybScpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyAtLS0gVXBkYXRlIHByaWNlIGluIHN0aWNreSBjYXJ0IHNlY3Rpb24gZm9yIGlubGluZSBwYW5lbCAtLS1cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlSW5saW5lU3RpY2t5Q2FydFByaWNlKCkge1xuICAgICAgICAgICAgLy8gR2V0IHRoZSB1cGRhdGVkIHByaWNlIGZyb20gdGhlIGlubGluZSBwYW5lbFxuICAgICAgICAgICAgdmFyIGlubGluZVByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRldGFpbHMtcGFuZWwtaW5saW5lIC5wcm9kdWN0Vmlldy1wcmljZScpO1xuICAgICAgICAgICAgdmFyIHN0aWNreVByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN0aWNreS1jYXJ0LXNlY3Rpb24tbW9iaWxlIC5zdGlja3ktY2FydC1wcm9kdWN0LXByaWNlJyk7XG4gICAgICAgICAgICBpZiAoaW5saW5lUHJpY2UgJiYgc3RpY2t5UHJpY2UpIHtcbiAgICAgICAgICAgICAgICBzdGlja3lQcmljZS5pbm5lckhUTUwgPSBpbmxpbmVQcmljZS5pbm5lckhUTUw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gUnVuIG9uY2Ugb24gcGFnZSBsb2FkXG4gICAgICAgIHVwZGF0ZUlubGluZVN0aWNreUNhcnRQcmljZSgpO1xuICAgICAgICAvLyBSdW4gd2hlbmV2ZXIgcHJvZHVjdCBvcHRpb25zIGNoYW5nZSBpbiBpbmxpbmUgcGFuZWxcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2R1Y3RPcHRpb25zRm9ybS1pbmxpbmUnKT8uYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgc2V0VGltZW91dCh1cGRhdGVJbmxpbmVTdGlja3lDYXJ0UHJpY2UsIDEwMCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBBbHNvIG9ic2VydmUgZm9yIHByaWNlIGNoYW5nZXMgaW4gaW5saW5lIHBhbmVsIChpbiBjYXNlIHByaWNlIHVwZGF0ZXMgdmlhIEFKQVgpXG4gICAgICAgIHZhciBpbmxpbmVQcmljZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRldGFpbHMtcGFuZWwtaW5saW5lIC5wcm9kdWN0Vmlldy1wcmljZScpO1xuICAgICAgICBpZiAoaW5saW5lUHJpY2VFbCkge1xuICAgICAgICAgICAgdmFyIG9ic2VydmVySW5saW5lU3RpY2t5ID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodXBkYXRlSW5saW5lU3RpY2t5Q2FydFByaWNlKTtcbiAgICAgICAgICAgIG9ic2VydmVySW5saW5lU3RpY2t5Lm9ic2VydmUoaW5saW5lUHJpY2VFbCwgeyBjaGlsZExpc3Q6IHRydWUsIHN1YnRyZWU6IHRydWUgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2aWRlb0dhbGxlcnkoKTtcblxuICAgICAgICB0aGlzLmJ1bGtQcmljaW5nSGFuZGxlcigpO1xuXG4gICAgICAgIGNvbnN0ICRyZXZpZXdGb3JtID0gY2xhc3NpZnlGb3JtKCcud3JpdGVSZXZpZXctZm9ybScpO1xuXG4gICAgICAgIHRoaXMuSVRTUHJvZHVjdCA9IG5ldyBJVFNQcm9kdWN0KHRoaXMuY29udGV4dCk7XG4gICAgICAgIFxuICAgICAgICAvLyBJbml0aWFsaXplIGR1YWwtcGFuZWwgc2Nyb2xsIHN5bmNocm9uaXphdGlvbiBmb3Igc3BsaXQgbGF5b3V0XG4gICAgICAgIHRoaXMuZHVhbFBhbmVsU2Nyb2xsID0gbmV3IER1YWxQYW5lbFNjcm9sbCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBzcGxpdCBsYXlvdXQgY2Fyb3VzZWwgb3ZlcnJpZGVcbiAgICAgICAgdGhpcy5zcGxpdExheW91dENhcm91c2VsID0gbmV3IFNwbGl0TGF5b3V0Q2Fyb3VzZWwoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEluaXRpYWxpemUgbW9iaWxlIHN0aWNreSBjYXJ0IHZhbGlkYXRvciAoc2Nyb2xsLXRvLWVycm9yICsgcG9wdXAgbm90aWZpY2F0aW9uKVxuICAgICAgICB0aGlzLm1vYmlsZVN0aWNreUNhcnRWYWxpZGF0b3IgPSBuZXcgTW9iaWxlU3RpY2t5Q2FydFZhbGlkYXRvcigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCRyZXZpZXdGb3JtLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IHJldmlldyA9IG5ldyBSZXZpZXcoeyAkcmV2aWV3Rm9ybSB9KTtcblxuICAgICAgICAkKCdib2R5Jykub24oJ2NsaWNrJywgJ1tkYXRhLXJldmVhbC1pZD1cIm1vZGFsLXJldmlldy1mb3JtXCJdJywgKCkgPT4ge1xuICAgICAgICAgICAgdmFsaWRhdG9yID0gcmV2aWV3LnJlZ2lzdGVyVmFsaWRhdGlvbih0aGlzLmNvbnRleHQpO1xuICAgICAgICAgICAgdGhpcy5hcmlhRGVzY3JpYmVSZXZpZXdJbnB1dHMoJHJldmlld0Zvcm0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAkcmV2aWV3Rm9ybS5vbignc3VibWl0JywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbGlkYXRvcikge1xuICAgICAgICAgICAgICAgIHZhbGlkYXRvci5wZXJmb3JtQ2hlY2soKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsaWRhdG9yLmFyZUFsbCgndmFsaWQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnByb2R1Y3RSZXZpZXdIYW5kbGVyKCk7XG5cbiAgICAgICAgLy8gLS0tIFN0aWNreSBDYXJ0IFByaWNlIFN5bmMgKEltcHJvdmVkKSAtLS1cbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlU3RpY2t5Q2FydFByaWNlKCkge1xuICAgICAgICAgICAgLy8gTWFpbiBwcmljZSBhcmVhXG4gICAgICAgICAgICB2YXIgbWFpbldpdGhUYXggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdFZpZXcgLnByaWNlLS13aXRoVGF4Jyk7XG4gICAgICAgICAgICB2YXIgbWFpbldpdGhvdXRUYXggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdFZpZXcgLnByaWNlLS13aXRob3V0VGF4Jyk7XG4gICAgICAgICAgICAvLyBTdGlja3kgY2FydCBhcmVhXG4gICAgICAgICAgICB2YXIgc3RpY2t5V2l0aFRheCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdGlja3ktY2FydC1wcm9kdWN0LXByaWNlIC5wcmljZS0td2l0aFRheCcpO1xuICAgICAgICAgICAgdmFyIHN0aWNreVdpdGhvdXRUYXggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3RpY2t5LWNhcnQtcHJvZHVjdC1wcmljZSAucHJpY2UtLXdpdGhvdXRUYXgnKTtcbiAgICAgICAgXG4gICAgICAgICAgICBpZiAobWFpbldpdGhUYXggJiYgc3RpY2t5V2l0aFRheCkge1xuICAgICAgICAgICAgICAgIHN0aWNreVdpdGhUYXguaW5uZXJIVE1MID0gbWFpbldpdGhUYXguaW5uZXJIVE1MO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1haW5XaXRob3V0VGF4ICYmIHN0aWNreVdpdGhvdXRUYXgpIHtcbiAgICAgICAgICAgICAgICBzdGlja3lXaXRob3V0VGF4LmlubmVySFRNTCA9IG1haW5XaXRob3V0VGF4LmlubmVySFRNTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJ1biBvbmNlIG9uIHBhZ2UgbG9hZFxuICAgICAgICB1cGRhdGVTdGlja3lDYXJ0UHJpY2UoKTtcblxuICAgICAgICAvLyBSdW4gd2hlbmV2ZXIgcHJvZHVjdCBvcHRpb25zIGNoYW5nZVxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLnByb2R1Y3RWaWV3LW9wdGlvbnMnKSkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodXBkYXRlU3RpY2t5Q2FydFByaWNlLCAxMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBbHNvIG9ic2VydmUgZm9yIHByaWNlIGNoYW5nZXMgKGluIGNhc2UgcHJpY2UgdXBkYXRlcyB2aWEgQUpBWClcbiAgICAgICAgdmFyIG1haW5QcmljZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0Vmlldy1wcmljZScpO1xuICAgICAgICBpZiAobWFpblByaWNlKSB7XG4gICAgICAgICAgICB2YXIgb2JzZXJ2ZXJQcmljZSA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHVwZGF0ZVN0aWNreUNhcnRQcmljZSk7XG4gICAgICAgICAgICBvYnNlcnZlclByaWNlLm9ic2VydmUobWFpblByaWNlLCB7IGNoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIC0tLSBTeW5jIGRhdGEtcHJvZHVjdC1wcmljZS13aXRob3V0LXRheCBpbiAuZGV0YWlscy1wYW5lbC1pbmxpbmUgLS0tXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZUlubGluZVBhbmVsUHJpY2UoKSB7XG4gICAgICAgICAgICAvLyBBbHdheXMgY29weSBmcm9tIGRlc2t0b3AvbWFpbiBwYW5lbCB0byBpbmxpbmUvbW9iaWxlIHBhbmVsXG4gICAgICAgICAgICB2YXIgbWFpblByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRldGFpbHMtcGFuZWwgLnByb2R1Y3RWaWV3LXByaWNlIFtkYXRhLXByb2R1Y3QtcHJpY2Utd2l0aG91dC10YXhdJyk7XG4gICAgICAgICAgICB2YXIgaW5saW5lUGFuZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGV0YWlscy1wYW5lbC1pbmxpbmUgLnByb2R1Y3RWaWV3LXByaWNlIFtkYXRhLXByb2R1Y3QtcHJpY2Utd2l0aG91dC10YXhdJyk7XG4gICAgICAgICAgICBpZiAobWFpblByaWNlICYmIGlubGluZVBhbmVsKSB7XG4gICAgICAgICAgICAgICAgaW5saW5lUGFuZWwuaW5uZXJIVE1MID0gbWFpblByaWNlLmlubmVySFRNTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJ1biBvbmNlIG9uIHBhZ2UgbG9hZFxuICAgICAgICB1cGRhdGVJbmxpbmVQYW5lbFByaWNlKCk7XG5cbiAgICAgICAgLy8gUnVuIHdoZW5ldmVyIHByb2R1Y3Qgb3B0aW9ucyBjaGFuZ2VcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5wcm9kdWN0Vmlldy1vcHRpb25zJykpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHVwZGF0ZUlubGluZVBhbmVsUHJpY2UsIDEwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFsc28gb2JzZXJ2ZSBmb3IgcHJpY2UgY2hhbmdlcyAoaW4gY2FzZSBwcmljZSB1cGRhdGVzIHZpYSBBSkFYKVxuICAgICAgICB2YXIgbWFpblByaWNlSW5saW5lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRldGFpbHMtcGFuZWwgLnByb2R1Y3RWaWV3LXByaWNlIFtkYXRhLXByb2R1Y3QtcHJpY2Utd2l0aG91dC10YXhdJyk7XG4gICAgICAgIGlmIChtYWluUHJpY2VJbmxpbmUpIHtcbiAgICAgICAgICAgIHZhciBvYnNlcnZlcklubGluZSA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHVwZGF0ZUlubGluZVBhbmVsUHJpY2UpO1xuICAgICAgICAgICAgb2JzZXJ2ZXJJbmxpbmUub2JzZXJ2ZShtYWluUHJpY2VJbmxpbmUsIHsgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYXJpYURlc2NyaWJlUmV2aWV3SW5wdXRzKCRmb3JtKSB7XG4gICAgICAgICRmb3JtLmZpbmQoJ1tkYXRhLWlucHV0XScpLmVhY2goKF8sIGlucHV0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCAkaW5wdXQgPSAkKGlucHV0KTtcbiAgICAgICAgICAgIGNvbnN0IG1zZ1NwYW5JZCA9IGAkeyRpbnB1dC5hdHRyKCduYW1lJyl9LW1zZ2A7XG5cbiAgICAgICAgICAgICRpbnB1dC5zaWJsaW5ncygnc3BhbicpLmF0dHIoJ2lkJywgbXNnU3BhbklkKTtcbiAgICAgICAgICAgICRpbnB1dC5hdHRyKCdhcmlhLWRlc2NyaWJlZGJ5JywgbXNnU3BhbklkKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJvZHVjdFJldmlld0hhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnVybC5pbmRleE9mKCcjd3JpdGVfcmV2aWV3JykgIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLiRyZXZpZXdMaW5rLnRyaWdnZXIoJ2NsaWNrJyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBidWxrUHJpY2luZ0hhbmRsZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnVybC5pbmRleE9mKCcjYnVsa19wcmljaW5nJykgIT09IC0xKSB7XG4gICAgICAgICAgICB0aGlzLiRidWxrUHJpY2luZ0xpbmsudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUVBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFFQTtBQUFBO0FBQUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7O0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./assets/js/theme/product.js\n");

/***/ }),

/***/ "./assets/js/theme/product/image-gallery.js":
/*!**************************************************!*\
  !*** ./assets/js/theme/product/image-gallery.js ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/* WEBPACK VAR INJECTION */(function($) {$(document).ready(function () {\n  function initMainImageSlick() {\n    if (window.innerWidth > 768) return;\n    if (typeof $.fn.slick !== 'function') return;\n    if (!window.BCData || !window.BCData.product_images || !window.BCData.product_images.length) return;\n    var $mainImageDesktop = $('.main-image-desktop');\n    if (!$mainImageDesktop.length) return;\n    if ($('.main-image-slick').length) return;\n    var images = window.BCData.product_images;\n    var $slick = $('<div class=\"main-image-slick\"></div>');\n\n    // Add CLS prevention attributes\n    $slick.css({\n      'min-height': '300px',\n      'background': 'white',\n      'aspect-ratio': '1/1',\n      'border-radius': '12px',\n      'margin-bottom': '1rem'\n    });\n    images.forEach(function (img) {\n      var $slide = $('<div></div>');\n      var $figure = $('<figure class=\"productView-image\" data-image-gallery-main></figure>');\n      var $container = $('<div class=\"productView-img-container\"></div>');\n\n      // Add CLS prevention\n      $figure.css({\n        'aspect-ratio': '1/1',\n        'min-height': '300px',\n        'background': 'white'\n      });\n      $container.css({\n        'min-height': '300px',\n        'display': 'flex',\n        'align-items': 'center',\n        'justify-content': 'center',\n        'background': 'white'\n      });\n      var $a = $('<a></a>').attr('href', img.url_zoom).attr('data-type', 'image').attr('target', '_blank');\n      var $img = $('<img>').attr('src', img.url_zoom).attr('alt', img.alt || '').attr('loading', 'eager').attr('fetchpriority', 'high').css({\n        'width': '100%',\n        'height': '100%',\n        'object-fit': 'contain'\n      });\n      $a.append($img);\n      $container.append($a);\n      $figure.append($container);\n      $slide.append($figure);\n      $slick.append($slide);\n    });\n    $mainImageDesktop.after($slick);\n    $slick.slick({\n      dots: true,\n      arrows: false,\n      infinite: true,\n      speed: 300,\n      slidesToShow: 1,\n      slidesToScroll: 1,\n      adaptiveHeight: true\n    });\n  }\n  var tries = 0;\n  var maxTries = 10;\n  var interval = setInterval(function () {\n    tries++;\n    initMainImageSlick();\n    if ($('.main-image-slick').length || tries >= maxTries) {\n      clearInterval(interval);\n    }\n  }, 200);\n});\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.min.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvanMvdGhlbWUvcHJvZHVjdC9pbWFnZS1nYWxsZXJ5LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3RoZW1lL3Byb2R1Y3QvaW1hZ2UtZ2FsbGVyeS5qcz8zMDc2Il0sInNvdXJjZXNDb250ZW50IjpbIiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgIGZ1bmN0aW9uIGluaXRNYWluSW1hZ2VTbGljaygpIHtcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gNzY4KSByZXR1cm47XG4gICAgICAgIGlmICh0eXBlb2YgJC5mbi5zbGljayAhPT0gJ2Z1bmN0aW9uJykgcmV0dXJuO1xuICAgICAgICBpZiAoIXdpbmRvdy5CQ0RhdGEgfHwgIXdpbmRvdy5CQ0RhdGEucHJvZHVjdF9pbWFnZXMgfHwgIXdpbmRvdy5CQ0RhdGEucHJvZHVjdF9pbWFnZXMubGVuZ3RoKSByZXR1cm47XG5cbiAgICAgICAgdmFyICRtYWluSW1hZ2VEZXNrdG9wID0gJCgnLm1haW4taW1hZ2UtZGVza3RvcCcpO1xuICAgICAgICBpZiAoISRtYWluSW1hZ2VEZXNrdG9wLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICBpZiAoJCgnLm1haW4taW1hZ2Utc2xpY2snKS5sZW5ndGgpIHJldHVybjtcblxuICAgICAgICB2YXIgaW1hZ2VzID0gd2luZG93LkJDRGF0YS5wcm9kdWN0X2ltYWdlcztcbiAgICAgICAgdmFyICRzbGljayA9ICQoJzxkaXYgY2xhc3M9XCJtYWluLWltYWdlLXNsaWNrXCI+PC9kaXY+Jyk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgQ0xTIHByZXZlbnRpb24gYXR0cmlidXRlc1xuICAgICAgICAkc2xpY2suY3NzKHtcbiAgICAgICAgICAgICdtaW4taGVpZ2h0JzogJzMwMHB4JyxcbiAgICAgICAgICAgICdiYWNrZ3JvdW5kJzogJ3doaXRlJyxcbiAgICAgICAgICAgICdhc3BlY3QtcmF0aW8nOiAnMS8xJyxcbiAgICAgICAgICAgICdib3JkZXItcmFkaXVzJzogJzEycHgnLFxuICAgICAgICAgICAgJ21hcmdpbi1ib3R0b20nOiAnMXJlbSdcbiAgICAgICAgfSk7XG4gICAgICAgIGltYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKGltZykge1xuICAgICAgICAgICAgdmFyICRzbGlkZSA9ICQoJzxkaXY+PC9kaXY+Jyk7XG4gICAgICAgICAgICB2YXIgJGZpZ3VyZSA9ICQoJzxmaWd1cmUgY2xhc3M9XCJwcm9kdWN0Vmlldy1pbWFnZVwiIGRhdGEtaW1hZ2UtZ2FsbGVyeS1tYWluPjwvZmlndXJlPicpO1xuICAgICAgICAgICAgdmFyICRjb250YWluZXIgPSAkKCc8ZGl2IGNsYXNzPVwicHJvZHVjdFZpZXctaW1nLWNvbnRhaW5lclwiPjwvZGl2PicpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZGQgQ0xTIHByZXZlbnRpb25cbiAgICAgICAgICAgICRmaWd1cmUuY3NzKHtcbiAgICAgICAgICAgICAgICAnYXNwZWN0LXJhdGlvJzogJzEvMScsXG4gICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiAnMzAwcHgnLFxuICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kJzogJ3doaXRlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkY29udGFpbmVyLmNzcyh7XG4gICAgICAgICAgICAgICAgJ21pbi1oZWlnaHQnOiAnMzAwcHgnLFxuICAgICAgICAgICAgICAgICdkaXNwbGF5JzogJ2ZsZXgnLFxuICAgICAgICAgICAgICAgICdhbGlnbi1pdGVtcyc6ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICdqdXN0aWZ5LWNvbnRlbnQnOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCc6ICd3aGl0ZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyICRhID0gJCgnPGE+PC9hPicpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCBpbWcudXJsX3pvb20pXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2RhdGEtdHlwZScsICdpbWFnZScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKTtcbiAgICAgICAgICAgIHZhciAkaW1nID0gJCgnPGltZz4nKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdzcmMnLCBpbWcudXJsX3pvb20pXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2FsdCcsIGltZy5hbHQgfHwgJycpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2xvYWRpbmcnLCAnZWFnZXInKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdmZXRjaHByaW9yaXR5JywgJ2hpZ2gnKVxuICAgICAgICAgICAgICAgIC5jc3Moe1xuICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICAgICdvYmplY3QtZml0JzogJ2NvbnRhaW4nXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkYS5hcHBlbmQoJGltZyk7XG4gICAgICAgICAgICAkY29udGFpbmVyLmFwcGVuZCgkYSk7XG4gICAgICAgICAgICAkZmlndXJlLmFwcGVuZCgkY29udGFpbmVyKTtcbiAgICAgICAgICAgICRzbGlkZS5hcHBlbmQoJGZpZ3VyZSk7XG4gICAgICAgICAgICAkc2xpY2suYXBwZW5kKCRzbGlkZSk7XG4gICAgICAgIH0pO1xuICAgICAgICAkbWFpbkltYWdlRGVza3RvcC5hZnRlcigkc2xpY2spO1xuICAgICAgICAkc2xpY2suc2xpY2soe1xuICAgICAgICAgICAgZG90czogdHJ1ZSxcbiAgICAgICAgICAgIGFycm93czogZmFsc2UsXG4gICAgICAgICAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICAgICAgICAgIHNwZWVkOiAzMDAsXG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgICAgICAgICAgIGFkYXB0aXZlSGVpZ2h0OiB0cnVlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGxldCB0cmllcyA9IDA7XG4gICAgY29uc3QgbWF4VHJpZXMgPSAxMDtcbiAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uKCkge1xuICAgICAgICB0cmllcysrO1xuICAgICAgICBpbml0TWFpbkltYWdlU2xpY2soKTtcbiAgICAgICAgaWYgKCQoJy5tYWluLWltYWdlLXNsaWNrJykubGVuZ3RoIHx8IHRyaWVzID49IG1heFRyaWVzKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTtcbiAgICAgICAgfVxuICAgIH0sIDIwMCk7XG59KTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./assets/js/theme/product/image-gallery.js\n");

/***/ }),

/***/ "./assets/js/theme/product/video-gallery.js":
/*!**************************************************!*\
  !*** ./assets/js/theme/product/video-gallery.js ***!
  \**************************************************/
/*! exports provided: VideoGallery, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"VideoGallery\", function() { return VideoGallery; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return videoGallery; });\nvar VideoGallery = /*#__PURE__*/function () {\n  function VideoGallery($element) {\n    this.$player = $element.find('[data-video-player]');\n    this.$videos = $element.find('[data-video-item]');\n    this.currentVideo = {};\n    this.bindEvents();\n  }\n  var _proto = VideoGallery.prototype;\n  _proto.selectNewVideo = function selectNewVideo(e) {\n    e.preventDefault();\n    var $target = $(e.currentTarget);\n    this.currentVideo = {\n      id: $target.data('videoId'),\n      $selectedThumb: $target\n    };\n    this.setMainVideo();\n    this.setActiveThumb();\n  };\n  _proto.setMainVideo = function setMainVideo() {\n    this.$player.attr('src', \"//www.youtube.com/embed/\" + this.currentVideo.id);\n  };\n  _proto.setActiveThumb = function setActiveThumb() {\n    this.$videos.removeClass('is-active');\n    this.currentVideo.$selectedThumb.addClass('is-active');\n  };\n  _proto.bindEvents = function bindEvents() {\n    this.$videos.on('click', this.selectNewVideo.bind(this));\n  };\n  return VideoGallery;\n}();\nfunction videoGallery() {\n  var pluginKey = 'video-gallery';\n  var $videoGallery = $(\"[data-\" + pluginKey + \"]\");\n  $videoGallery.each(function (index, element) {\n    var $el = $(element);\n    var isInitialized = $el.data(pluginKey) instanceof VideoGallery;\n    if (isInitialized) {\n      return;\n    }\n    $el.data(pluginKey, new VideoGallery($el));\n  });\n}\n/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.min.js\")))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9hc3NldHMvanMvdGhlbWUvcHJvZHVjdC92aWRlby1nYWxsZXJ5LmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3RoZW1lL3Byb2R1Y3QvdmlkZW8tZ2FsbGVyeS5qcz82ZWNkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBWaWRlb0dhbGxlcnkge1xuICAgIGNvbnN0cnVjdG9yKCRlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuJHBsYXllciA9ICRlbGVtZW50LmZpbmQoJ1tkYXRhLXZpZGVvLXBsYXllcl0nKTtcbiAgICAgICAgdGhpcy4kdmlkZW9zID0gJGVsZW1lbnQuZmluZCgnW2RhdGEtdmlkZW8taXRlbV0nKTtcbiAgICAgICAgdGhpcy5jdXJyZW50VmlkZW8gPSB7fTtcbiAgICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XG4gICAgfVxuXG4gICAgc2VsZWN0TmV3VmlkZW8oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgY29uc3QgJHRhcmdldCA9ICQoZS5jdXJyZW50VGFyZ2V0KTtcblxuICAgICAgICB0aGlzLmN1cnJlbnRWaWRlbyA9IHtcbiAgICAgICAgICAgIGlkOiAkdGFyZ2V0LmRhdGEoJ3ZpZGVvSWQnKSxcbiAgICAgICAgICAgICRzZWxlY3RlZFRodW1iOiAkdGFyZ2V0LFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuc2V0TWFpblZpZGVvKCk7XG4gICAgICAgIHRoaXMuc2V0QWN0aXZlVGh1bWIoKTtcbiAgICB9XG5cbiAgICBzZXRNYWluVmlkZW8oKSB7XG4gICAgICAgIHRoaXMuJHBsYXllci5hdHRyKCdzcmMnLCBgLy93d3cueW91dHViZS5jb20vZW1iZWQvJHt0aGlzLmN1cnJlbnRWaWRlby5pZH1gKTtcbiAgICB9XG5cbiAgICBzZXRBY3RpdmVUaHVtYigpIHtcbiAgICAgICAgdGhpcy4kdmlkZW9zLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcbiAgICAgICAgdGhpcy5jdXJyZW50VmlkZW8uJHNlbGVjdGVkVGh1bWIuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xuICAgIH1cblxuICAgIGJpbmRFdmVudHMoKSB7XG4gICAgICAgIHRoaXMuJHZpZGVvcy5vbignY2xpY2snLCB0aGlzLnNlbGVjdE5ld1ZpZGVvLmJpbmQodGhpcykpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdmlkZW9HYWxsZXJ5KCkge1xuICAgIGNvbnN0IHBsdWdpbktleSA9ICd2aWRlby1nYWxsZXJ5JztcbiAgICBjb25zdCAkdmlkZW9HYWxsZXJ5ID0gJChgW2RhdGEtJHtwbHVnaW5LZXl9XWApO1xuXG4gICAgJHZpZGVvR2FsbGVyeS5lYWNoKChpbmRleCwgZWxlbWVudCkgPT4ge1xuICAgICAgICBjb25zdCAkZWwgPSAkKGVsZW1lbnQpO1xuICAgICAgICBjb25zdCBpc0luaXRpYWxpemVkID0gJGVsLmRhdGEocGx1Z2luS2V5KSBpbnN0YW5jZW9mIFZpZGVvR2FsbGVyeTtcblxuICAgICAgICBpZiAoaXNJbml0aWFsaXplZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgJGVsLmRhdGEocGx1Z2luS2V5LCBuZXcgVmlkZW9HYWxsZXJ5KCRlbCkpO1xuICAgIH0pO1xufVxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUFBO0FBR0E7QUFDQTtBQUFBO0FBQUE7QUFHQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./assets/js/theme/product/video-gallery.js\n");

/***/ })

}]);